(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,n){},193:function(e,t,n){e.exports=n(400)},227:function(e,t,n){},294:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var a=n(68),r=n(0),s=n.n(r),o=n(83),i=n.n(o),c=n(3),l=n(16),u=n(184),d=n(43),p=function(e){return{loggedIn:e.session.isAuthenticated}},m=(Object(d.f)(Object(c.b)(p)(function(e){var t=e.component,n=e.path,a=e.loggedIn,r=e.exact;return s.a.createElement(d.b,{path:n,exact:r,render:function(e){return a?s.a.createElement(d.a,{to:"/spots"}):s.a.createElement(t,e)}})})),Object(d.f)(Object(c.b)(p)(function(e){var t=e.component,n=e.loggedIn,a=Object(u.a)(e,["component","loggedIn"]);return s.a.createElement(d.b,Object.assign({},a,{render:function(e){return n?s.a.createElement(t,e):s.a.createElement(d.a,{to:"/login"})}}))}))),h=n(22),f=n.n(h),v=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},E=n(70),g=n.n(E),b=function(e){return{type:"RECEIVE_SESSION_ERRORS",errors:e}},k=function(e){return function(t){return(n=e,f.a.post("/api/users/register",n)).then(function(e){var n=e.data,a=n.token,r=n.name;localStorage.setItem("jwtToken",a),localStorage.setItem("currentUser",r),v(a);var s={token:g()(a)};s.username=r,t({type:"RECEIVE_USER_SIGN_IN",currentUser:s})}).catch(function(e){t(b(e.response.data))});var n}},O=function(e){return function(t){return(n=e,f.a.post("/api/users/login",n)).then(function(e){var n=e.data,a=n.token,r=n.name;localStorage.setItem("jwtToken",a),localStorage.setItem("currentUser",r),v(a);var s={token:g()(a)};s.username=r,t({type:"RECEIVE_CURRENT_USER",currentUser:s})}).catch(function(e){t(b(e.response.data))});var n}},y=function(){return function(e){localStorage.removeItem("jwtToken"),v(!1),e({type:"RECEIVE_USER_LOGOUT"})}},S=function(e){return{type:"RECEIVE_SEARCH_STATUS",active:e}},j=function(e){return{type:"RECEIVE_BOUNDS",bounds:e}},w=function(e){return{type:"RECEIVE_LOCATION",location:e}},C=function(e){return{type:"RECEIVE_MAP_IS_ACTIVE",mapIsActive:e}},N=n(6),I=n(7),_=n(10),R=n(9),D=n(14),M=n(11),U=(n(227),n(15)),V=n(85),A=(n(158),n(159),function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={startDate:n.props.activeSearch.startDate,endDate:n.props.activeSearch.endDate},n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"toggleModal",value:function(){var e=document.getElementById("dates-modal"),t=document.getElementById("guests-modal"),n=document.getElementById("price-range-modal");t.classList.contains("show-modal")&&t.classList.remove("show-modal"),n.classList.contains("show-modal")&&n.classList.remove("show-modal"),e.classList.toggle("show-modal")}},{key:"applyDateRange",value:function(e){e.preventDefault(),this.props.receiveDateRange(this.state),this.toggleModal()}},{key:"clearDateRange",value:function(e){e.preventDefault(),this.setState({startDate:null,endDate:null})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("button",{className:"modal-button",onClick:function(){return e.toggleModal()}},"Dates"),s.a.createElement("div",{className:"dates-modal",id:"dates-modal"},s.a.createElement("form",{className:""},s.a.createElement(V.DateRangePicker,{startDate:this.state.startDate,startDateId:"start-date-field",endDate:this.state.endDate,endDateId:"end-date-field",onDatesChange:function(t){var n=t.startDate,a=t.endDate;return e.setState({startDate:n,endDate:a})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}}),s.a.createElement("br",null),s.a.createElement("div",{className:"modal-buttons"},s.a.createElement("button",{className:"date-range-picker-button",onClick:function(t){return e.clearDateRange(t)}},"Clear"),s.a.createElement("button",{className:"date-range-picker-button",onClick:function(t){return e.applyDateRange(t)}},"Apply")))))}}]),t}(s.a.Component)),L=function(e){return{type:"RECEIVE_SPOTS",spots:e}},B=function(e){return function(t){return function(e){return f.a.post("/api/spots/",e)}(e).then(function(e){return t(L(e))}).catch(function(e){return console.log(e)})}},T=function(e){return function(t){return function(e){return f.a.get("/api/spots/".concat(e))}(e).then(function(e){return t(L(e))}).catch(function(e){return console.log(e)})}},x=Object(c.b)(function(e){return{activeSearch:e.ui.activeSearch}},function(e){return{receiveDateRange:function(t){return e(function(e){return{type:"RECEIVE_DATE_RANGE",dateRange:e}}(t))},fetchSpots:function(t){return e(B(t))}}})(A),P=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={adults:n.props.guestCount.adults,children:n.props.guestCount.children,infants:n.props.guestCount.infants},n.applyGuestCount=n.applyGuestCount.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"incrementValue",value:function(e){var t=this.state[e]+1;switch(e){case"children":case"infants":t>5&&(t=5);break;case"adults":t>16&&(t=16)}this.setState(Object(U.a)({},e,t)),this.addAdults()}},{key:"addAdults",value:function(){(this.state.children>=0||this.state.infants>=0)&&0===this.state.adults&&this.setState({adults:1})}},{key:"decrementValue",value:function(e){var t=this.state[e]-1;t<0&&(t=0),this.setState(Object(U.a)({},e,t))}},{key:"toggleModal",value:function(){var e=document.getElementById("guests-modal"),t=document.getElementById("dates-modal"),n=document.getElementById("price-range-modal");t.classList.contains("show-modal")&&t.classList.remove("show-modal"),n.classList.contains("show-modal")&&n.classList.remove("show-modal"),e.classList.toggle("show-modal")}},{key:"clearGuestCount",value:function(e){e.preventDefault(),this.setState({adults:0,children:0,infants:0})}},{key:"applyGuestCount",value:function(e){e.preventDefault(),0===this.state.adults+this.state.children+this.state.infants&&this.setState({adults:1}),this.props.receiveGuestCount(this.state),this.toggleModal()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("button",{className:"modal-button",onClick:function(){return e.toggleModal()}},"Guests"),s.a.createElement("div",{className:"guests-modal",id:"guests-modal"},s.a.createElement("form",null,s.a.createElement("div",{className:"incrementer"},s.a.createElement("h5",null,"Adults"),s.a.createElement("div",{className:"increment-buttons"},s.a.createElement("button",{className:"increment-button",onClick:function(t){t.preventDefault(),e.decrementValue("adults")}},"-"),s.a.createElement("h5",null," ",this.state.adults,"+"),s.a.createElement("button",{className:"increment-button",onClick:function(t){t.preventDefault(),e.incrementValue("adults")}},"+"))),s.a.createElement("div",{className:"incrementer"},s.a.createElement("h5",null," Children "),s.a.createElement("div",{className:"increment-buttons"},s.a.createElement("button",{className:"increment-button",onClick:function(t){t.preventDefault(),e.decrementValue("children")}},"-"),s.a.createElement("h5",null,this.state.children,"+"),s.a.createElement("button",{className:"increment-button",onClick:function(t){t.preventDefault(),e.incrementValue("children")}},"+"))),s.a.createElement("div",{className:"incrementer"},s.a.createElement("h5",null," Infants "),s.a.createElement("div",{className:"increment-buttons"},s.a.createElement("button",{className:"increment-button",onClick:function(t){t.preventDefault(),e.decrementValue("infants")}},"-"),s.a.createElement("h5",null,this.state.infants,"+"),s.a.createElement("button",{className:"increment-button",onClick:function(t){t.preventDefault(),e.incrementValue("infants")}},"+"))),s.a.createElement("div",{className:"modal-buttons"},s.a.createElement("button",{className:"date-range-picker-button",onClick:function(t){return e.clearGuestCount(t)}},"Clear"),s.a.createElement("button",{className:"date-range-picker-button",onClick:function(t){return e.applyGuestCount(t)}},"Apply")))))}}]),t}(s.a.Component),F=Object(c.b)(function(e){return{guestCount:e.ui.activeSearch.guestCount}},function(e){return{receiveGuestCount:function(t){return e({type:"RECEIVE_GUEST_COUNT",count:t})},fetchSpots:function(t){return e(B(t))}}})(P),G=n(186),z=n.n(G),$=(n(294),function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={minValue:n.props.activeSearch.priceRange.minValue,maxValue:n.props.activeSearch.priceRange.maxValue},n.changeValues=n.changeValues.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"changeValues",value:function(e){this.setState({minValue:e.values[0],maxValue:e.values[1]})}},{key:"toggleModal",value:function(){var e=document.getElementById("price-range-modal"),t=document.getElementById("dates-modal"),n=document.getElementById("guests-modal");t.classList.contains("show-modal")&&t.classList.remove("show-modal"),n.classList.contains("show-modal")&&n.classList.remove("show-modal"),e.classList.toggle("show-modal")}},{key:"applyPriceRange",value:function(e){e.preventDefault(),this.props.receivePriceRange(this.state),this.toggleModal()}},{key:"clearPriceRange",value:function(e){e.preventDefault(),this.setState({minValue:0,maxValue:1e3})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("button",{className:"modal-button",onClick:function(){return e.toggleModal()}},"Price"),s.a.createElement("div",{className:"price-range-modal",id:"price-range-modal"},s.a.createElement("form",null,s.a.createElement(z.a,{min:0,max:1e3,values:[0,1e3],onValuesUpdated:function(t){return e.changeValues(t)}}),s.a.createElement("div",{className:"modal-price-range"},s.a.createElement("div",null,"$",this.state.minValue),"  ",s.a.createElement("div",null,"$",this.state.maxValue)),s.a.createElement("div",{className:"modal-buttons"},s.a.createElement("button",{className:"date-range-picker-button",onClick:function(t){return e.clearPriceRange(t)}},"Clear"),s.a.createElement("button",{className:"date-range-picker-button",onClick:function(t){return e.applyPriceRange(t)}},"Apply")))))}}]),t}(s.a.Component)),K=Object(c.b)(function(e){return{activeSearch:e.ui.activeSearch}},function(e){return{receivePriceRange:function(t){return e(function(e){return{type:"RECEIVE_PRICE_RANGE",priceRange:e}}(t))},fetchSpots:function(t){return e(B(t))}}})($),H=n(187),W=n.n(H),Y=function(e){var t=e.receiveMapIsActive,n=e.mapIsActive;return s.a.createElement("div",{className:"options-wrapper"},s.a.createElement("div",{className:"form-options-wrapper"},s.a.createElement(x,null),s.a.createElement(F,null),s.a.createElement(K,null)),s.a.createElement("div",{className:"switch-wrapper"},s.a.createElement("p",{className:"show-map-p"},"Show Map"),s.a.createElement(W.a,{onChange:function(){return t(!n)},checked:n})))},q=n(58),J=n.n(q),Q=(n(381),n(29)),X=n.n(Q),Z=window.google,ee=function(){function e(t){Object(N.a)(this,e),this.map=t,this.markers={},this.removeMarker=this.removeMarker.bind(this)}return Object(I.a)(e,[{key:"updateMarkers",value:function(e){var t=this,n={};e.forEach(function(e){return n[e._id]=e}),Object.keys(this.markers).filter(function(e){return!n[e]}).forEach(function(e){return t.removeMarker(t.markers[e])}),e.filter(function(e){return!t.markers[e._id]}).forEach(function(e){return t.createMarkerFromSpot(e)})}},{key:"removeMarker",value:function(e){this.markers[e.spotId].setMap(null),delete this.markers[e.spotId]}},{key:"createMarkerFromSpot",value:function(e){var t={lat:e.lat,lng:e.lng},n='<div id="content"><div id="siteNotice"></div >'+'<img style="max-height: 120px; max-width: 200px;" alt="" src='.concat(e.images[0].img_url,">")+'<h1 id="firstHeading" class="firstHeading" style="max-width: 200px; word-break: break-word;"><b>'.concat(e.name,"</b></h1>")+'<div id="bodyContent">'+"<p><b>$".concat(e.price," per night</b></p>")+"</div></div>",a=new Z.maps.InfoWindow({content:n}),r=new Z.maps.Marker({position:t,map:this.map,label:{text:"$".concat(e.price),fontSize:"9px",fontWeight:"bold"},spotId:e._id});r.addListener("click",function(){a.open(this.map,r)}),this.markers[r.spotId]=r}}]),e}(),te=window.google,ne=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).handleChange=function(e){n.setState({address:e})},n.handleSelect=function(e){n.setState({address:e}),window.map?(window.preventFetch=!0,Object(q.geocodeByAddress)(e).then(function(e){Object(q.getLatLng)(e[0]).then(function(e){var t=e.lat,n=e.lng;window.locationObj=new te.maps.LatLng(t,n),window.map.panTo(window.locationObj)}),n.activateSearch()})):(window.preventFetch=!1,Object(q.geocodeByAddress)(e).then(function(e){return Object(q.getLatLng)(e[0])}).then(function(e){var t=e;n.props.receiveLocation(new te.maps.LatLng(t.lat,t.lng)),n.activateSearch()}).catch(function(e){return console.error("Error",e)}))},n.state={address:""},n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(X.a.isEqual(e.activeSearch,this.props.activeSearch))window.markerManager&&(this.MarkerManager=window.markerManager,this.MarkerManager.updateMarkers(this.props.spots));else if(window.preventFetch){window.preventFetch=!1;var n=document.getElementById("header-search-input"),a={bounds:this.props.activeSearch.bounds,searchText:n.value,startDate:this.props.activeSearch.startDate,endDate:this.props.activeSearch.endDate,guestCount:this.props.activeSearch.guestCount,priceRange:this.props.activeSearch.priceRange};this.props.fetchSpots(a).then(function(){t.MarkerManager=window.markerManager,t.MarkerManager.updateMarkers(t.props.spots)}),"/spots"!==this.props.history.location.pathname&&this.props.history.push("/spots")}else{var r=document.getElementById("header-search-input"),s={bounds:this.props.activeSearch.bounds,searchText:r.value,startDate:this.props.activeSearch.startDate,endDate:this.props.activeSearch.endDate,guestCount:this.props.activeSearch.guestCount,priceRange:this.props.activeSearch.priceRange};this.props.fetchSpots(s),"/spots"!==this.props.history.location.pathname&&!0===this.props.activeSearch.active&&this.props.history.push("/spots")}}},{key:"activateSearch",value:function(){this.props.receiveSearchStatus(!0),this.props.receiveMapIsActive(!0)}},{key:"render",value:function(){var e;return this.props.activeSearch.active&&(e=s.a.createElement("div",null,s.a.createElement(Y,{receiveMapIsActive:this.props.receiveMapIsActive,mapIsActive:this.props.activeSearch.mapIsActive}))),s.a.createElement("div",null,s.a.createElement(J.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},function(e){var t,n=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,o=e.loading;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},s.a.createElement("input",Object.assign({id:"header-search-input"},n((t={placeholder:"Search Spots ... (try San Francisco)"},Object(U.a)(t,"placeholder","Search Spots ... (try San Francisco)"),Object(U.a)(t,"placeholder","Search Spots ... (try San Francisco)"),Object(U.a)(t,"placeholder","Search Spots ... (try San Francisco)"),Object(U.a)(t,"className","location-search-input"),t))))),s.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",r(e,{className:t,style:n}),s.a.createElement("span",null,e.description))})))}),e)}}]),t}(s.a.Component),ae=Object(d.f)(ne),re=Object(c.b)(function(e){return{activeSearch:e.ui.activeSearch,spots:Object.values(e.entities.spots)}},function(e){return{fetchSpots:function(t){return e(B(t))},receiveSearchStatus:function(t){return e(S(t))},receiveLocation:function(t){return e(w(t))},receiveBounds:function(t){return e(j(t))},receiveMapIsActive:function(t){return e(C(t))}}})(ae),se=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).logoutUser=n.logoutUser.bind(Object(D.a)(n)),n.linkToProfile=n.linkToProfile.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"logoutUser",value:function(e){e.preventDefault(),this.props.logout()}},{key:"linkToProfile",value:function(){this.props.history.push("/profile")}},{key:"render",value:function(){return s.a.createElement("div",{className:"nav-menu-buttons"},s.a.createElement("button",{className:"nav-menu-button",onClick:this.linkToProfile},"Profile"),s.a.createElement("button",{className:"nav-menu-button",onClick:this.logoutUser},"Logout"))}}]),t}(s.a.Component),oe=Object(d.f)(se),ie=Object(c.b)(function(e){return{}},function(e){return{logout:function(){return e(y())}}})(oe),ce=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={email:"",handle:"",password:"",password2:"",errors:{}},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.renderFieldErrors=n.renderFieldErrors.bind(Object(D.a)(n)),n.clearedErrors=!1,n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentWillReceiveProps",value:function(e){!0===e.signedIn&&this.props.history.push("/login"),this.setState({errors:e.errors})}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(U.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,handle:this.state.handle,password:this.state.password,password2:this.state.password2};this.props.signup(t,this.props.history)}},{key:"renderErrors",value:function(){var e=this;return s.a.createElement("ul",null,Object.keys(this.state.errors).map(function(t,n){return s.a.createElement("li",{key:"error-".concat(n)},e.state.errors[t])}))}},{key:"renderFieldErrors",value:function(e){return this.state.errors[e]?s.a.createElement("div",{className:"error-div"},s.a.createElement("h5",{className:"field-error"},this.state.errors[e])):s.a.createElement("div",{className:"error-div"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"login-form-container"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"login-form"},s.a.createElement("br",null),s.a.createElement("h1",{className:"session-modal-header"},"Sign up to continue"),s.a.createElement("br",null),s.a.createElement("input",{type:"text",className:"modal-input-field",value:this.state.email,onChange:this.update("email"),placeholder:"Email"}),this.renderFieldErrors("email"),s.a.createElement("input",{type:"text",className:"modal-input-field",value:this.state.handle,onChange:this.update("handle"),placeholder:"Handle"}),this.renderFieldErrors("handle"),s.a.createElement("input",{type:"password",className:"modal-input-field",value:this.state.password,onChange:this.update("password"),placeholder:"Password"}),this.renderFieldErrors("password"),s.a.createElement("input",{type:"password",className:"modal-input-field",value:this.state.password2,onChange:this.update("password2"),placeholder:"Confirm Password"}),this.renderFieldErrors("password2"),s.a.createElement("input",{className:"session-modal-submit-button",type:"submit",value:"Submit"}),s.a.createElement("div",{className:"login-modal-lower-text"},s.a.createElement("h4",null,"Already have an account?"),s.a.createElement("h4",{onClick:function(){return e.props.handleClick("login-modal")},className:"switch-between-modals"},"Log in")))))}}]),t}(s.a.Component),le=Object(d.f)(ce),ue=Object(c.b)(function(e){return{signedIn:e.session.isSignedIn,errors:e.errors.session}},function(e){return{signup:function(t){return e(k(t))},login:function(t){return e(O(t))}}})(le),de=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={email:"",password:"",errors:{}},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.renderFieldErrors=n.renderFieldErrors.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.currentUser,this.setState({errors:e.errors})}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(U.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.login(t)}},{key:"renderFieldErrors",value:function(e){return this.state.errors[e]?s.a.createElement("div",{className:"error-div"},s.a.createElement("h5",{className:"field-error"},this.state.errors[e])):s.a.createElement("div",{className:"error-div"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"login-form"},s.a.createElement("br",null),s.a.createElement("h1",{className:"session-modal-header"},"Log in to continue"),s.a.createElement("br",null),s.a.createElement("input",{type:"text",className:"modal-input-field",value:this.state.email,onChange:this.update("email"),placeholder:"Email"}),this.renderFieldErrors("email"),s.a.createElement("input",{type:"password",className:"modal-input-field",value:this.state.password,onChange:this.update("password"),placeholder:"Password"}),this.renderFieldErrors("password"),s.a.createElement("input",{className:"session-modal-submit-button",type:"submit",value:"Submit"}),s.a.createElement("div",{className:"login-modal-lower-text"},s.a.createElement("h4",null,"Don't have an account?"),s.a.createElement("h4",{onClick:function(){return e.props.handleClick("signup-modal")},className:"switch-between-modals"},"Sign up")))),s.a.createElement("div",{onClick:function(){return e.props.handleClick("login-modal")},className:"modal-underlay"}))}}]),t}(s.a.Component),pe=Object(d.f)(de),me=Object(c.b)(function(e){return{errors:e.errors.session}},function(e){return{login:function(t){return e(O(t))}}})(pe),he=(n(382),function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).activeModal=null,n.handleClick=n.handleClick.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"handleClick",value:function(e){this.activeModal===e?(this.closeModal(e),this.activeModal=null,this.toggleOverlay()):null===this.activeModal?(this.activeModal=e,this.openModal(e),this.toggleOverlay()):(this.closeModal(this.activeModal),this.activeModal=e,this.openModal(e))}},{key:"closeModal",value:function(e){document.getElementById(e).classList.remove("show-session-modal")}},{key:"openModal",value:function(e){document.getElementById(e).classList.add("show-session-modal")}},{key:"toggleOverlay",value:function(){document.getElementById("modal-underlay").classList.toggle("show-modal-underlay")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"logged-out-nav-menu"},s.a.createElement("div",{className:"nav-menu-buttons"},s.a.createElement("button",{className:"nav-menu-button",onClick:function(){return e.handleClick("signup-modal")}},"Signup"),s.a.createElement("button",{className:"nav-menu-button",onClick:function(){return e.handleClick("login-modal")}},"Login")),s.a.createElement("div",{className:"session-modals"},s.a.createElement("div",{id:"signup-modal",className:"signup-modal"},s.a.createElement("button",{className:"close-modal-button",onClick:function(){return e.handleClick("signup-modal")}}," \xd7"),s.a.createElement(ue,{handleClick:this.handleClick})),s.a.createElement("div",{id:"login-modal",className:"login-modal"},s.a.createElement("button",{className:"close-modal-button",onClick:function(){return e.handleClick("login-modal")}}," \xd7"),s.a.createElement(me,{handleClick:this.handleClick})),s.a.createElement("div",{onClick:function(){return e.handleClick(e.activeModal)},id:"modal-underlay"})))}}]),t}(s.a.Component)),fe=Object(c.b)(function(e){return{}},function(e){return{}})(he),ve=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).getMenuOptions=n.getMenuOptions.bind(Object(D.a)(n)),n.linkToMainPage=n.linkToMainPage.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"getMenuOptions",value:function(){return this.props.loggedIn?s.a.createElement("div",{className:"nav-menu"},s.a.createElement(ie,null)):s.a.createElement("div",{className:"nav-menu"},s.a.createElement(fe,null))}},{key:"linkToMainPage",value:function(){this.props.history.push("/"),this.props.receiveMapIsActive(!1),this.props.receiveSearchStatus(!1)}},{key:"render",value:function(){return s.a.createElement("div",{className:"nav-bar"},s.a.createElement("div",{className:"nav-bar-left"},s.a.createElement("h1",{onClick:this.linkToMainPage},"A"),s.a.createElement(re,null)),this.getMenuOptions())}}]),t}(s.a.Component),Ee=Object(d.f)(ve),ge=Object(c.b)(function(e){return{loggedIn:e.session.isAuthenticated}},function(e){return{logout:function(){return e(y())},receiveMapIsActive:function(t){return e(C(t))},receiveSearchStatus:function(t){return e(S(t))}}})(Ee),be=(n(383),function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"splash-page"},s.a.createElement("h1",{className:"splash-page-title"},"Your home away from home..."),s.a.createElement("img",{alt:"",className:"splash-page",src:"http://www.vythiriresort.com/images/gallery/high-resolution/tree_house.jpg"}))}}]),t}(s.a.Component)),ke=function(e){var t=e.spot;return e.mapIsActive?s.a.createElement(l.b,{key:t._id,to:"/spot/".concat(t._id)},s.a.createElement("li",{key:t._id,className:"spot-list-item-m"},s.a.createElement("div",{className:"m-spot-container"},s.a.createElement("div",{id:"spot-list-photo-container-m"},s.a.createElement("img",{alt:"",className:"spot-list-photo-m",src:t.images[0].img_url})),s.a.createElement("div",{className:"spot-list-deets"},s.a.createElement("div",{className:"spot-list-deets-desc"},s.a.createElement("p",{className:"spot-list-description-m"},t.name)),s.a.createElement("div",{className:"spot-list-deets-price"},s.a.createElement("p",{className:"spot-list-price-m"},"$",t.price,"/night")))))):s.a.createElement(l.b,{key:t._id,to:"/spot/".concat(t._id)},s.a.createElement("div",null,s.a.createElement("li",{key:t._id,className:"spot-list-item"},s.a.createElement("div",{id:"spot-list-photo-container"},s.a.createElement("img",{alt:"",id:"spot-list-photo",src:t.images[0].img_url})),s.a.createElement("p",{id:"spot-list-description"},t.name),s.a.createElement("p",{id:"spot-list-price"},"$",t.price,"/night"))))},Oe=(n(384),window.google),ye=function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={center:this.props.searchParams.location,zoom:14},n=this.refs.map;window.map=this.map=new Oe.maps.Map(n,t),window.markerManager=this.MarkerManager=new ee(this.map),this.MarkerManager.updateMarkers(this.props.spots),this.map.addListener("bounds_changed",function(){var t=e.map.getBounds(),n=t.getSouthWest(),a=t.getNorthEast(),r={sw:{lat:n.lat(),lng:n.lng()},ne:{lat:a.lat(),lng:a.lng()}};e.props.receiveBounds(r);var s=e.map.getCenter();e.props.receiveLocation(s)})}},{key:"componentDidUpdate",value:function(e,t){X.a.isEqual(e.searchParams.location,this.props.searchParams.location)||this.MarkerManager.updateMarkers(this.props.spots)}},{key:"render",value:function(){return s.a.createElement("div",{id:"map-container",ref:"map"}," ")}}]),t}(s.a.Component),Se=Object(d.f)(ye),je=Object(c.b)(function(e){return{spots:Object.values(e.entities.spots),searchParams:e.ui.activeSearch}},function(e){return{fetchSpots:function(t){return e(B(t))},receiveLocation:function(t){return e(w(t))},receiveBounds:function(t){return e(j(t))}}})(Se),we=function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchSpots(),this.props.receiveSearchStatus(!0)}},{key:"isMapActive",value:function(){var e=document.getElementById("outer-spots-div"),t=document.getElementById("spots-results-list");if(this.props.mapIsActive)return e&&!e.classList.contains("spots-index-map-active")&&(e.classList.add("spots-index-map-active"),t.classList.add("spots-results-list-column"),t.classList.remove("spots-results-list")),s.a.createElement(je,null);e&&e.classList.contains("spots-index-map-active")&&(e.classList.remove("spots-index-map-active"),t.classList.add("spots-results-list"),t.classList.remove("spots-results-list-column"))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"spots-and-map-div"},s.a.createElement("div",{id:"outer-spots-div",className:"outer-spots-div"},s.a.createElement("h2",{id:"spots-list-header"},"Explore all ",this.props.spots.length," homes"),s.a.createElement("div",{id:"spots-list-container"},s.a.createElement("ul",{id:"spots-results-list",className:"spots-results-list"},this.props.spots.map(function(t){return s.a.createElement(ke,{spot:t,key:t._id,mapIsActive:e.props.mapIsActive})})))),this.isMapActive())}}]),t}(s.a.Component),Ce=Object(d.f)(we),Ne=Object(c.b)(function(e){return{spots:Object.values(e.entities.spots),active:e.ui.activeSearch.active,mapIsActive:e.ui.activeSearch.mapIsActive}},function(e){return{fetchSpots:function(t){return e(B(t))},fetchSpot:function(t){return e(T(t))},receiveSearchStatus:function(t){return e(S(t))}}})(Ce),Ie=function(e){return{type:"RECEIVE_BOOKINGS",bookings:e}},_e=function(e){return function(t){return function(e){return f.a.post("/api/bookings/",{user_id:e})}(e).then(function(e){return t(Ie(e))}).catch(function(e){return console.log(e)})}},Re=function(e){return function(t){return function(e){return f.a.get("/api/bookings/".concat(e))}(e).then(function(e){return t(Ie(e))}).catch(function(e){return console.log(e)})}},De=function(e){return function(t){return function(e){return f.a.post("/api/bookings/create",e)}(e).then(function(e){return t(Ie(e))}).catch(function(e){return t(function(e){return{type:"RECEIVE_BOOKING_ERRORS",err:e}}(e))})}},Me=function(e){return function(t){return function(e){return f.a.delete("/api/bookings/".concat(e))}(e).then(function(e){return t(Ie(e))}).catch(function(e){return console.log(e)})}},Ue=n(4),Ve=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={startDate:null,endDate:null,guest_count:"",spot_id:n.props.spot._id,user_id:"",response_messages:null},n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.isDayBlocked=n.isDayBlocked.bind(Object(D.a)(n)),n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchSpotBookings(this.props.spot._id)}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(U.a)({},e,n.currentTarget.value))}}},{key:"renderResponseMessages",value:function(e){"success"===e.type?this.setState({response_messages:[s.a.createElement("div",{key:"success",id:"messages-success"},"Successfully Booked!")]}):this.setState({response_messages:[s.a.createElement("div",{key:"errors",id:"messages-errors"},e.body)]})}},{key:"isDayBlocked",value:function(e){var t=e.calendar(),n=this.props.user.bookings;n=Object.values(n);var a=!1;return n.forEach(function(e){var n=Ue(e.start_date).calendar(),r=Ue(e.end_date).calendar();t>=n&&t<=r&&(a=!0)}),a}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=null,a=this.state;a.user_id=this.props.user.user_id,this.props.createBooking(a).then(function(e){"RECEIVE_BOOKINGS"===(n=e).type?200===n.bookings.status&&t.renderResponseMessages({type:"success"}):"RECEIVE_BOOKING_ERRORS"===n.type&&t.renderResponseMessages({type:n.type,body:Object.values(n.err.response.data)})})}},{key:"render",value:function(){var e=this;return this.props.spot?s.a.createElement("div",null,s.a.createElement("div",{className:"reserve-main"},s.a.createElement("div",{id:"reserve-inner-container"},s.a.createElement("div",{id:"reserve-price"},"$",this.props.spot.price,s.a.createElement("span",{className:"sans12"}," per night")),s.a.createElement("span",{className:"divider"}),s.a.createElement("form",{id:"reserve-form",onSubmit:this.handleSubmit},s.a.createElement("label",null,"Dates",s.a.createElement(V.DateRangePicker,{startDate:this.state.startDate,isDayBlocked:function(t){return e.isDayBlocked(t)},startDateId:"start-date-field",endDate:this.state.endDate,endDateId:"end-date-field",onDatesChange:function(t){var n=t.startDate,a=t.endDate;return e.setState({startDate:n,endDate:a})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}})),s.a.createElement("label",null,"Guests",s.a.createElement("br",null),s.a.createElement("input",{className:"reserve-guests",onChange:this.update("guest_count"),type:"text",placeholder:"enter # of guests"})),s.a.createElement("input",{id:"reservation-submit-button",type:"submit",value:"Book"}))),this.state.response_messages)):s.a.createElement("div",null)}}]),t}(s.a.Component),Ae=Object(d.f)(Ve),Le=Object(c.b)(function(e,t){return{user:{user_id:e.session.hasOwnProperty("user")?e.session.user.id:"",bookings:e.entities.bookings}}},function(e){return{createBooking:function(t){return e(De(t))},fetchSpotBookings:function(t){return e(Re(t))}}})(Ae),Be=(n(4),function(e){function t(){return Object(N.a)(this,t),Object(_.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.spot||this.props.fetchSpot(this.props.spot_id),this.props.receiveSearchStatus(!1)}},{key:"render",value:function(){return this.props.spot?s.a.createElement("div",null,s.a.createElement("div",{className:"spotshow-main"},s.a.createElement("div",{id:"spotshow-photo-container"},s.a.createElement("img",{className:"spotshow-photo-large",src:this.props.spot.images[0].img_url,alt:""}),s.a.createElement("img",{className:"spotshow-photo-large",src:this.props.spot.images[1].img_url,alt:""})),s.a.createElement("div",{id:"outer"},s.a.createElement("div",{className:"spotshow-info-column"},s.a.createElement("p",{className:"spotshow-name"},this.props.spot.name),s.a.createElement("p",{className:"spotshow-city"},this.props.spot.city," "),s.a.createElement("span",{className:"spotshow-occupancy"},"Occupancy",s.a.createElement("br",null),s.a.createElement("p",{className:"s"},this.props.spot.occupancy," guests")),s.a.createElement("div",{className:"spotshow-description"},s.a.createElement("p",null,this.props.spot.description))),s.a.createElement("div",{className:"check-in-box"},s.a.createElement(Le,{spot:this.props.spot}))))):s.a.createElement("div",null)}}]),t}(s.a.Component)),Te=Object(d.f)(Be),xe=Object(c.b)(function(e,t){return{spot:e.entities.spots[t.match.params.id],spot_id:t.match.params.id}},function(e){return{fetchSpots:function(t){return e(B(t))},fetchSpot:function(t){return e(T(t))},fetchSpotBookings:function(t){return e(Re(t))},receiveSearchStatus:function(t){return e(S(t))}}})(Te),Pe=(n(385),function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(_.a)(this,Object(R.a)(t).call(this,e))).state={},n}return Object(M.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=null;t=this.props.currentUser.token?this.props.currentUser.token.id:this.props.currentUser.id,this.state={},this.props.fetchUserBookings(t).then(function(){return Object.values(e.props.bookings).forEach(function(t){e.props.fetchSpot(t.spot_id).then(function(n){e.setState(Object(U.a)({},t._id,n.spots.data[t.spot_id]))})})})}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.history.location.pathname!==this.props.history.location.pathname){this.props.currentUser.token?this.props.currentUser.token.id:this.props.currentUser.id,this.props.fetchUserBookings(this.props.currentUserId).then(function(){return Object.values(t.props.bookings).forEach(function(e){t.props.fetchSpot(e.spot_id)})})}}},{key:"render",value:function(){var e=this;if(!this.props.bookings)return null;if(Object.keys(this.state).length<Object.keys(this.props.bookings).length)return null;var t=this.props.bookings.map(function(t){var n=new Date(t.start_date),a=new Date(t.end_date),r=new Date(t.created_at),o=e.state[t._id].images[0].img_url;return s.a.createElement("li",{key:t._id},s.a.createElement("div",null,s.a.createElement(l.b,{key:t._id,to:"/spot/".concat(t.spot_id)},s.a.createElement("img",{className:"bookings-photo",src:o,alt:""})),s.a.createElement("div",{className:"profile-booking-text"},s.a.createElement("p",null,"Booking Confirmation: ",t._id),s.a.createElement("p",null,"Booked on: ",r.getMonth()+1,"/",r.getDate()+1,"/",r.getFullYear()),s.a.createElement("p",null,"From: ",n.getMonth()+1,"/",n.getDate()+1,"/",n.getFullYear()),s.a.createElement("p",null,"Until: ",a.getMonth()+1,"/",a.getDate()+1,"/",a.getFullYear()),s.a.createElement("p",null,"Booked for ",t.guest_count," occupant(s)"))),s.a.createElement("div",{className:"profile-booking-delete-button-div"},s.a.createElement("button",{onClick:function(n){n.preventDefault(),e.props.deleteBooking(t._id)}},"Delete booking")))});return s.a.createElement("div",{className:"profile"},s.a.createElement("h2",null,"Your bookings:"),s.a.createElement("ul",null,t))}}]),t}(s.a.Component)),Fe=Object(c.b)(function(e){return{currentUser:e.session.user,bookings:Object.values(e.entities.bookings),spots:e.entities.spots}},function(e){return{fetchUserBookings:function(t){return e(_e(t))},deleteBooking:function(t){return e(Me(t))},fetchSpotBookings:function(t){return e(Re(t))},fetchSpot:function(t){return e(T(t))}}})(Pe),Ge=function(){return s.a.createElement("div",null,s.a.createElement(ge,null),s.a.createElement("div",null,s.a.createElement(d.d,null,s.a.createElement(d.b,{exact:!0,path:"/",component:be}),s.a.createElement(d.b,{path:"/spots",component:Ne}),s.a.createElement(d.b,{path:"/spot/:id",component:xe}),s.a.createElement(m,{exact:!0,path:"/profile",component:Fe}))))},ze=function(e){var t=e.store;return s.a.createElement(c.a,{store:t},s.a.createElement(l.a,null,s.a.createElement(Ge,null)))},$e=n(25),Ke=n(189),He=n(190),We=n.n(He),Ye={isAuthenticated:!1,user:{id:""}},qe=[],Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_SESSION_ERRORS":return t.errors;case"RECEIVE_CURRENT_USER":return qe;default:return e}},Qe=[],Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_BOOKING_ERRORS":return t.err.response.data;default:return e}},Ze=Object($e.c)({session:Je,bookings:Xe}),et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_SPOTS":return t.spots.data;default:return e}},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_BOOKINGS":return t.bookings.data;default:return e}},nt={},at=Object($e.c)({spots:et,bookings:tt,users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_CURRENT_USER":var n={username:t.currentUser.username,user_id:t.currentUser.token.id};return Object.assign({},e,Object(U.a)({},t.currentUser.token.id,n));case"RECEIVE_USER_SIGN_IN":var a={username:t.currentUser.username,user_id:t.currentUser.token.id};return Object.assign({},e,Object(U.a)({},t.currentUser.token.id,a));default:return e}}}),rt={active:!1,startDate:null,endDate:null,guestCount:{adults:1,children:0,infants:0},priceRange:{minValue:0,maxValue:1e3},location:new window.google.maps.LatLng(37.79736054067749,-122.41654052893894),bounds:null,mapIsActive:!1},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_DATE_RANGE":return Object(Q.merge)({},e,t.dateRange);case"RECEIVE_PRICE_RANGE":return Object(Q.merge)({},e,{priceRange:t.priceRange});case"RECEIVE_GUEST_COUNT":return Object(Q.merge)({},e,{guestCount:t.count});case"RECEIVE_SEARCH_STATUS":return Object(Q.merge)({},e,{active:t.active});case"RECEIVE_BOUNDS":return Object(Q.merge)({},e,{bounds:t.bounds});case"RECEIVE_LOCATION":return Object(Q.merge)({},e,{location:t.location});case"RECEIVE_MAP_IS_ACTIVE":return Object(Q.merge)({},e,{mapIsActive:t.mapIsActive});default:return e}},ot=Object($e.c)({activeSearch:st}),it=Object($e.c)({errors:Ze,session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_CURRENT_USER":return Object(a.a)({},e,{isAuthenticated:!!t.currentUser,session_id:t.currentUser.token.id,user:t.currentUser});case"RECEIVE_USER_LOGOUT":return{isAuthenticated:!1,user:void 0};case"RECEIVE_USER_SIGN_IN":return Object(a.a)({},e,{isSignedIn:!0,isAuthenticated:!!t.currentUser,session_id:t.currentUser.token.id,user:t.currentUser});default:return e}},entities:at,ui:ot}),ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object($e.d)(it,e,Object($e.a)(Ke.a,We.a))},lt=(n(386),n(387),n(388),n(389),n(390),n(86)),ut=n.n(lt),dt=n(191),pt=n.n(dt),mt=n(192),ht=n.n(mt),ft=n(103),vt=n.n(ft);ut.a.registerInterface(pt.a),ut.a.registerTheme(Object(a.a)({},ht.a,vt.a)),document.addEventListener("DOMContentLoaded",function(){var e;if(localStorage.jwtToken){v(localStorage.jwtToken);var t=g()(localStorage.jwtToken),n={session:{isAuthenticated:!0,user:t,username:localStorage.currentUser}};e=ct(n);var a=Date.now()/1e3;t.exp<a&&(e.dispatch(y()),window.location.href="/login")}else e=ct({});var r=document.getElementById("root");i.a.render(s.a.createElement(ze,{store:e}),r),window.getState=e.getState,window.axios=f.a,window.fetchSpots=B,window.dispatch=e.dispatch})}},[[193,1,2]]]);
//# sourceMappingURL=main.b1edfe17.chunk.js.map