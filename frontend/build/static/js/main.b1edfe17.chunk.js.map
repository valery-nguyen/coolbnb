{"version":3,"sources":["util/route_util.js","util/session_api_util.js","actions/session_actions.js","actions/search_actions.js","components/search/form_date_range.jsx","actions/spots_actions.js","util/spots_api_util.js","components/search/form_date_range_container.js","components/search/form_guest_count.jsx","components/search/form_guest_count_container.js","components/search/form_price_range.jsx","components/search/form_price_range_container.js","components/search/form_options.jsx","util/marker_manager.js","components/search/auto_complete.jsx","components/search/auto_complete_container.js","components/nav/logged_in_nav_menu.jsx","components/nav/logged_in_nav_menu_container.js","components/session/signup_form.js","components/session/signup_form_container.js","components/session/login_form.js","components/session/login_form_container.js","components/nav/logged_out_nav_menu.jsx","components/nav/logged_out_nav_menu_container.js","components/nav/navbar.js","components/nav/navbar_container.js","components/main/main_page.js","components/spots/spot_index_item.jsx","components/map/spot_map.jsx","components/map/spot_map_container.js","components/spots/spots.js","components/spots/spots_container.js","actions/bookings_actions.js","util/bookings_api_util.js","components/spots/reservation_form.js","components/spots/reservation_form_container.js","components/spots/spot_show.js","components/spots/spot_container.js","components/profile/profile.jsx","components/profile/profile_container.js","components/app.js","components/root.js","reducers/session_reducer.js","reducers/session_errors_reducer.js","reducers/bookings_errors_reducer.js","reducers/errors_reducer.js","reducers/spots_reducer.js","reducers/bookings_reducer.js","reducers/users_reducer.js","reducers/entities_reducer.js","reducers/active_search_reducer.js","reducers/ui_reducer.js","reducers/root_reducer.js","store/store.js","index.js"],"names":["mapStateToProps","state","loggedIn","session","isAuthenticated","ProtectedRoute","withRouter","connect","_ref","Component","component","path","exact","react_default","a","createElement","react_router","render","props","to","_ref2","rest","Object","objectWithoutProperties","assign","setAuthToken","token","axios","defaults","headers","common","receiveErrors","errors","type","signup","user","dispatch","userData","post","then","res","_res$data","data","name","localStorage","setItem","APIUtil","decoded","jwt_decode","username","currentUser","catch","err","response","login","_res$data2","logout","removeItem","receiveSearchStatus","active","receiveBounds","bounds","receiveLocation","location","receiveMapIsActive","mapIsActive","FormDateRange","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","startDate","activeSearch","endDate","modal","document","getElementById","guestModal","priceModal","classList","contains","remove","toggle","e","preventDefault","receiveDateRange","toggleModal","setState","_this2","className","onClick","id","react_dates","startDateId","endDateId","onDatesChange","focusedInput","onFocusChange","clearDateRange","applyDateRange","React","receiveSpots","spots","fetchSpots","console","log","fetchSpot","get","concat","spot","ui","dateRange","options","FormGuestCount","adults","guestCount","children","infants","applyGuestCount","bind","assertThisInitialized","stateKey","value","defineProperty","addAdults","dateModal","receiveGuestCount","decrementValue","incrementValue","clearGuestCount","count","FormPriceRange","minValue","priceRange","maxValue","changeValues","values","receivePriceRange","Slider_default","min","max","onValuesUpdated","clearPriceRange","applyPriceRange","FormOptions","form_date_range_container","form_guest_count_container","form_price_range_container","Switch_default","onChange","checked","google","window","MarkerManager","map","markers","removeMarker","spotsObj","forEach","_id","keys","filter","spotId","newSpot","createMarkerFromSpot","marker","setMap","position","lat","lng","contentString","images","img_url","price","infowindow","maps","InfoWindow","content","Marker","label","text","fontSize","fontWeight","addListener","open","AutoComplete","handleChange","address","handleSelect","preventFetch","geocodeByAddress","results","getLatLng","locationObj","LatLng","panTo","activateSearch","latLng","error","prevProps","_","isEqual","markerManager","updateMarkers","inputEl","searchText","history","pathname","push","form_options","dist_default","onSelect","_getInputProps","getInputProps","suggestions","getSuggestionItemProps","loading","onSubmit","placeholder","suggestion","style","backgroundColor","cursor","description","entities","LoggedInNavMenu","logoutUser","linkToProfile","SignupForm","email","handle","password","password2","handleSubmit","renderFieldErrors","clearedErrors","nextProps","signedIn","field","currentTarget","_this3","i","key","_this4","update","handleClick","isSignedIn","LoginForm","LoggedOutNavMenu","activeModal","closeModal","toggleOverlay","openModal","add","signup_form_container","login_form_container","NavBar","getMenuOptions","linkToMainPage","logged_in_nav_menu_container","logged_out_nav_menu_container","auto_complete_container","MainPage","alt","src","SpotIndexItem","react_router_dom","SpotMap","mapOptions","center","searchParams","zoom","refs","Map","mapBounds","getBounds","southWest","getSouthWest","northEast","getNorthEast","sw","ne","getCenter","prevState","ref","Spots","outerSpotsDiv","list","spot_map_container","length","spot_index_item_SpotIndexItem","isMapActive","receiveBookings","bookings","fetchUserBookings","user_id","fetchSpotBookings","spot_id","createBooking","receiveBookingErrors","deleteBooking","delete","moment","require","ReservationForm","guest_count","response_messages","isDayBlocked","messages","body","day","calendarDay","calendar","result","booking","startDay","start_date","endDay","end_date","temp","bookingInfo","status","renderResponseMessages","ownProps","hasOwnProperty","SpotShow","city","occupancy","reservation_form_container","match","params","Profile","currentUserId","bookingsLis","Date","createdAt","created_at","imgUrl","getMonth","getDate","getFullYear","App","navbar_container","SpotsContainer","SpotContainer","ProfileContainer","Root","store","es","app","initialState","_nullErrors","SessionErrorsReducer","arguments","undefined","action","freeze","BookingsErrorsReducer","combineReducers","SpotsReducer","BookingsReducer","EntitiesReducer","users","userCurrent","defaultState","ActiveSearchReducer","merge","UIReducer","RootReducer","objectSpread","session_id","configureStore","preloadedState","createStore","rootReducer","applyMiddleware","thunk","logger","ThemedStyleSheet","registerInterface","cssInterface","registerTheme","RheostatDefaultTheme","ReactDatesDefaultTheme","addEventListener","jwtToken","decodedUser","currentTime","now","exp","href","root","ReactDOM","components_root","getState"],"mappings":"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","file":"static/js/main.b1edfe17.chunk.js","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Redirect, withRouter } from 'react-router-dom';\n\nconst Auth = ({ component: Component, path, loggedIn, exact }) => (\n  <Route path={path} exact={exact} render={(props) => (\n    !loggedIn ? (\n      <Component {...props} />\n    ) : (\n        <Redirect to=\"/spots\" /> //redirect to homepage\n      )\n  )} />\n);\n\nconst Protected = ({ component: Component, loggedIn, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      loggedIn ? (\n        <Component {...props} />\n      ) : (\n          <Redirect to=\"/login\" />\n        )\n    }\n  />\n);\n\nconst mapStateToProps = state => (\n  { loggedIn: state.session.isAuthenticated }\n);\n\nexport const AuthRoute = withRouter(connect(mapStateToProps)(Auth));\nexport const ProtectedRoute = withRouter(connect(mapStateToProps)(Protected));","import axios from 'axios';\n\nexport const setAuthToken = token => {\n  if (token) {\n    axios.defaults.headers.common['Authorization'] = token;\n  } else {\n    delete axios.defaults.headers.common['Authorization'];\n  }\n};\n\nexport const signup = (userData) => {\n  return axios.post('/api/users/register', userData);\n};\n\nexport const login = (userData) => {\n  return axios.post('/api/users/login', userData);\n};","import * as APIUtil from '../util/session_api_util';\nimport jwt_decode from 'jwt-decode';\n\nexport const RECEIVE_CURRENT_USER = \"RECEIVE_CURRENT_USER\";\nexport const RECEIVE_SESSION_ERRORS = \"RECEIVE_SESSION_ERRORS\";\nexport const RECEIVE_USER_LOGOUT = \"RECEIVE_USER_LOGOUT\";\nexport const RECEIVE_USER_SIGN_IN = \"RECEIVE_USER_SIGN_IN\";\n\nexport const receiveCurrentUser = currentUser => {\n\n  return {\n  type: RECEIVE_CURRENT_USER,\n  currentUser\n  };\n};\n\nexport const receiveUserSignIn = (currentUser) => {\n  \n  return {type: RECEIVE_USER_SIGN_IN,\n  currentUser\n  };\n};\n\nexport const receiveErrors = errors => ({\n  type: RECEIVE_SESSION_ERRORS,\n  errors\n});\n\nexport const logoutUser = () => ({\n  type: RECEIVE_USER_LOGOUT\n});\n\nexport const signup = user => dispatch =>\n  APIUtil.signup(user).then(res => {\n    const { token, name } = res.data;\n    localStorage.setItem('jwtToken', token);\n    localStorage.setItem('currentUser', name);\n    APIUtil.setAuthToken(token);\n    const decoded = { token: jwt_decode(token) };\n    decoded.username = name;\n    dispatch(receiveUserSignIn(decoded));\n  })\n    .catch(err => {\n      dispatch(receiveErrors(err.response.data));\n    });\n\nexport const login = user => dispatch => (\n  APIUtil.login(user).then(res => {\n    const { token, name } = res.data;\n    localStorage.setItem('jwtToken', token);\n    localStorage.setItem('currentUser', name);\n    APIUtil.setAuthToken(token);\n    const decoded = {token: jwt_decode(token)};\n    decoded.username = name;\n    dispatch(receiveCurrentUser(decoded));\n  })\n    .catch(err => {\n      dispatch(receiveErrors(err.response.data));\n    })\n);\n\nexport const logout = () => dispatch => {\n  localStorage.removeItem('jwtToken');\n  APIUtil.setAuthToken(false);\n  dispatch(logoutUser());\n};","export const RECEIVE_DATE_RANGE = \"RECEIVE_DATE_RANGE\";\nexport const RECEIVE_GUEST_COUNT = \"RECEIVE_GUEST_COUNT\";\nexport const RECEIVE_PRICE_RANGE = \"RECEIVE_PRICE_RANGE\";\nexport const RECEIVE_SEARCH_STATUS = 'RECEIVE_SEARCH_STATUS';\nexport const RECEIVE_BOUNDS = 'RECEIVE_BOUNDS';\nexport const RECEIVE_LOCATION = 'RECEIVE_LOCATION';\nexport const RECEIVE_MAP_IS_ACTIVE = 'RECEIVE_MAP_IS_ACTIVE';\n\nexport const receiveDateRange = (dateRange) => {\n  return {\n    type: RECEIVE_DATE_RANGE,\n    dateRange\n  }\n};\n\nexport const receiveGuestCount = (count) => ({\n  type: RECEIVE_GUEST_COUNT,\n  count\n});\n\nexport const receivePriceRange = (priceRange) => ({\n  type: RECEIVE_PRICE_RANGE,\n  priceRange\n});\n\nexport const receiveSearchStatus = (active) => ({\n  type: RECEIVE_SEARCH_STATUS,\n  active\n});\n\nexport const receiveBounds = (bounds) => ({\n  type: RECEIVE_BOUNDS,\n  bounds\n});\n\nexport const receiveLocation = (location) => ({\n  type: RECEIVE_LOCATION,\n  location\n});\n\nexport const receiveMapIsActive = (mapIsActive) => ({\n  type: RECEIVE_MAP_IS_ACTIVE,\n  mapIsActive\n});\n","import React from 'react';\nimport { DateRangePicker } from 'react-dates';\nimport 'react-dates/lib/css/_datepicker.css';\nimport './form_modal.css';\n\n\nclass FormDateRange extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      startDate: this.props.activeSearch.startDate,\n      endDate: this.props.activeSearch.endDate,\n    };\n  }\n\n  toggleModal() {\n    let modal = document.getElementById(\"dates-modal\");\n    let guestModal = document.getElementById(\"guests-modal\");\n    let priceModal = document.getElementById(\"price-range-modal\");\n    if (guestModal.classList.contains(\"show-modal\")) {\n      guestModal.classList.remove(\"show-modal\");\n    }\n    if (priceModal.classList.contains(\"show-modal\")) {\n      priceModal.classList.remove(\"show-modal\");\n    }\n    modal.classList.toggle(\"show-modal\");\n  }\n\n  applyDateRange(e) {\n    e.preventDefault();\n    this.props.receiveDateRange(this.state);\n    this.toggleModal();\n  }\n\n  clearDateRange(e) {\n    e.preventDefault();\n  this.setState({\n    startDate: null,\n    endDate: null\n  });\n}\n\n  render() {\n    return (\n\n      <div>\n        <button className=\"modal-button\" onClick={() => this.toggleModal()}>Dates</button>\n        <div className=\"dates-modal\" id=\"dates-modal\" >\n          <form className=\"\">\n\n            <DateRangePicker\n              startDate={this.state.startDate} // momentPropTypes.momentObj or null,\n              startDateId=\"start-date-field\" // PropTypes.string.isRequired,\n              endDate={this.state.endDate} // momentPropTypes.momentObj or null,\n              endDateId=\"end-date-field\" // PropTypes.string.isRequired,\n              onDatesChange={({ startDate, endDate }) => this.setState({ startDate, endDate })} // PropTypes.func.isRequired,\n              focusedInput={this.state.focusedInput} // PropTypes.oneOf([START_DATE, END_DATE]) or null,\n              onFocusChange={focusedInput => this.setState({ focusedInput })} // PropTypes.func.isRequired,\n            />\n\n            <br />\n            <div className=\"modal-buttons\" >\n              <button className=\"date-range-picker-button\" onClick={(e) => this.clearDateRange(e)}>Clear</button>\n              <button className=\"date-range-picker-button\" onClick={(e) => this.applyDateRange(e)}>Apply</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default FormDateRange;","import * as APIUtil from '../util/spots_api_util';\nexport const RECEIVE_SPOTS = \"RECEIVE_SPOTS\";\n\nexport const receiveSpots = spots => ({\n  type: RECEIVE_SPOTS,\n  spots\n});\n\nexport const fetchSpots = data => dispatch => {\n  return APIUtil.fetchSpots(data)\n    .then(spots => dispatch(receiveSpots(spots)))\n    .catch(err => console.log(err))\n};\n\nexport const fetchSpot = id => dispatch => {\n  \n  return APIUtil.fetchSpot(id)\n    .then(spot => dispatch(receiveSpots(spot)))\n    .catch(err => console.log(err))\n};","import axios from \"axios\";\n\nexport const fetchSpots = data => {\n  return axios.post('/api/spots/', data);\n};\n\nexport const fetchSpot = id => {\n  return axios.get(`/api/spots/${id}`);\n};","import { connect } from 'react-redux';\nimport FormDateRange from './form_date_range';\nimport { receiveDateRange } from './../../actions/search_actions';\nimport { fetchSpots } from './../../actions/spots_actions';\n\n\nconst mapStateToProps = state => {\n  \n  return ({\n    activeSearch: state.ui.activeSearch\n  });\n  \n};\n\nconst mapDispatchToProps = dispatch => ({\n  receiveDateRange: (dateRange) => dispatch(receiveDateRange(dateRange)),\n  fetchSpots: (options) => dispatch(fetchSpots(options)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDateRange);\n\n","import React from 'react';\nimport './form_modal.css';\n\n\nclass FormGuestCount extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      adults: this.props.guestCount.adults,\n      children: this.props.guestCount.children,\n      infants: this.props.guestCount.infants,\n    };\n    this.applyGuestCount = this.applyGuestCount.bind(this);\n    // add adults, children, infants to the state if we want their values to persist/show in modal on reload\n  }\n\n  incrementValue(stateKey) {\n    let value = this.state[stateKey] + 1;\n    // ADULTS CURRENTLY CAPPED AT 5.  FIX!\n    // 04/30/2019 I think I see the problem, here: I bet if we put a debugger in children or infants it'll hit it, regardless of whether we're adjusting adults.\n    // yep, just confirmed that.  But I don't know why :p  Okay, I figured it out.  The order matters: I put \"adults\" at the bottom and that solved it. \n    switch (stateKey) {\n      case (\"children\"):\n        if (value > 5) value = 5;\n        break;\n      case \"infants\":\n        if (value > 5) value = 5;\n        break;\n      case \"adults\":\n        if (value > 16) value = 16;\n        break;\n      default:\n        break;\n    }\n    this.setState({\n      [stateKey]: value\n    });\n\n    this.addAdults();\n  }\n\n  addAdults() {\n    if ((this.state.children >= 0 || this.state.infants >= 0) && this.state.adults === 0) {\n      this.setState({\n        adults: 1\n      });\n    }\n  }\n\n  decrementValue(stateKey) {\n    let value = this.state[stateKey] - 1;\n    if (value < 0) {\n      value = 0;\n    }\n    this.setState({\n      [stateKey]: value\n    });\n  }\n\n  toggleModal() {\n    let modal = document.getElementById(\"guests-modal\");\n    let dateModal = document.getElementById(\"dates-modal\");\n    let priceModal = document.getElementById(\"price-range-modal\");\n    if (dateModal.classList.contains(\"show-modal\")) {\n      dateModal.classList.remove(\"show-modal\");\n    }\n    if (priceModal.classList.contains(\"show-modal\")) {\n      priceModal.classList.remove(\"show-modal\");\n    }\n    modal.classList.toggle(\"show-modal\");\n  }\n\n  clearGuestCount(e) {\n    e.preventDefault();\n    this.setState({\n      adults: 0,\n      children: 0,\n      infants: 0,\n    });\n  }\n\n  applyGuestCount(e) {\n    e.preventDefault();\n    let total = this.state.adults + this.state.children + this.state.infants;\n    if (total === 0) this.setState({adults: 1});\n    this.props.receiveGuestCount(this.state);\n    this.toggleModal();\n  }\n\n  render() {\n    return (\n      <div>\n        <button className=\"modal-button\" onClick={() => this.toggleModal()}>Guests</button>\n        <div className=\"guests-modal\" id=\"guests-modal\" >\n          <form >\n\n            <div className=\"incrementer\">\n              <h5>Adults</h5>\n              <div className=\"increment-buttons\">\n                <button className=\"increment-button\" onClick={(e) => { e.preventDefault(); this.decrementValue(\"adults\")}}>-</button>\n                <h5> {this.state.adults}+</h5>\n                <button className=\"increment-button\" onClick={(e) => { e.preventDefault(); this.incrementValue(\"adults\")}}>+</button> \n              </div>\n            </div>\n\n            <div className=\"incrementer\">\n              <h5> Children </h5>\n              <div className=\"increment-buttons\">\n                <button className=\"increment-button\" onClick={(e) => { e.preventDefault(); this.decrementValue(\"children\")}}>-</button>\n                <h5>{this.state.children}+</h5>\n                <button className=\"increment-button\" onClick={(e) => { e.preventDefault(); this.incrementValue(\"children\")}}>+</button> \n              </div>\n            </div>\n\n\n\n            <div className=\"incrementer\">\n              <h5> Infants </h5>\n              <div className=\"increment-buttons\">\n                <button className=\"increment-button\" onClick={(e) => { e.preventDefault(); this.decrementValue(\"infants\")}}>-</button>\n                <h5>{this.state.infants}+</h5>\n                <button className=\"increment-button\" onClick={(e) => { e.preventDefault(); this.incrementValue(\"infants\")}}>+</button> \n              </div>\n            </div>\n\n            <div className=\"modal-buttons\">\n              <button className=\"date-range-picker-button\" onClick={(e) => this.clearGuestCount(e)}>Clear</button>\n              <button className=\"date-range-picker-button\" onClick={(e) => this.applyGuestCount(e)}>Apply</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default FormGuestCount;","\nimport { connect } from 'react-redux';\nimport FormGuestCount from './form_guest_count';\nimport { receiveGuestCount } from './../../actions/search_actions';\nimport { fetchSpots } from './../../actions/spots_actions';\n\n\nconst mapStateToProps = state => {\n\n  return ({\n  guestCount: state.ui.activeSearch.guestCount});\n\n  };\n\nconst mapDispatchToProps = dispatch => ({\n  receiveGuestCount: (guestCount) => dispatch(receiveGuestCount(guestCount)),\n  fetchSpots: (options) => dispatch(fetchSpots(options)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormGuestCount);\n\n\n","import React from 'react';\nimport Rheostat from 'rheostat';\nimport './form_price_range_slider.css';\n\nclass FormPriceRange extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      minValue: this.props.activeSearch.priceRange.minValue,\n      maxValue: this.props.activeSearch.priceRange.maxValue\n    };\n    this.changeValues = this.changeValues.bind(this);\n  }\n\n  changeValues(data) {\n  \n    this.setState({\n      minValue: data.values[0],\n      maxValue: data.values[1]\n    });\n  }\n\n  toggleModal() {\n    let modal = document.getElementById(\"price-range-modal\");\n    let dateModal = document.getElementById(\"dates-modal\");\n    let guestModal = document.getElementById(\"guests-modal\");\n    if (dateModal.classList.contains(\"show-modal\")) {\n      dateModal.classList.remove(\"show-modal\");\n    }\n    if (guestModal.classList.contains(\"show-modal\")) {\n      guestModal.classList.remove(\"show-modal\");\n    }\n    modal.classList.toggle(\"show-modal\");\n  }\n\n  applyPriceRange(e) {\n    e.preventDefault();\n    this.props.receivePriceRange(this.state);\n    this.toggleModal();\n  }\n\n  clearPriceRange(e) {\n    e.preventDefault();\n    this.setState({\n      minValue: 0,\n      maxValue: 1000\n    });\n  }\n\n  render() {\n    return (\n\n      <div>\n        <button className=\"modal-button\" onClick={() => this.toggleModal()}>Price</button>\n        <div className=\"price-range-modal\" id=\"price-range-modal\" >\n          <form >\n\n            <Rheostat\n              min={0}\n              max={1000}\n              values={[0, 1000]}\n              onValuesUpdated={(data) => this.changeValues(data)}\n            />\n            <div className=\"modal-price-range\">\n              <div>${this.state.minValue}</div>  <div>${this.state.maxValue}</div>\n            </div>\n            <div className=\"modal-buttons\">\n              <button className=\"date-range-picker-button\" onClick={(e) => this.clearPriceRange(e)}>Clear</button>\n              <button className=\"date-range-picker-button\" onClick={(e) => this.applyPriceRange(e)}>Apply</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default FormPriceRange;\n\n\n\n\n\n  \n\n","\nimport { connect } from 'react-redux';\nimport FormPriceRange from './form_price_range';\nimport { receivePriceRange } from './../../actions/search_actions';\nimport { fetchSpots } from './../../actions/spots_actions';\n\n\nconst mapStateToProps = state => ({\n  activeSearch: state.ui.activeSearch\n});\n\nconst mapDispatchToProps = dispatch => ({\n  receivePriceRange: (priceRange) => dispatch(receivePriceRange(priceRange)),\n  fetchSpots: (options) => dispatch(fetchSpots(options)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormPriceRange);","import React from 'react';\nimport FormDateRangeContainer from './form_date_range_container';\nimport FormGuestCountContainer from './form_guest_count_container';\nimport FormPriceRangeContainer from './form_price_range_container';\nimport Switch from '@material-ui/core/Switch';\n\nconst FormOptions = ({ receiveMapIsActive, mapIsActive }) => {\n\n  return ( \n    <div className=\"options-wrapper\"> \n\n      <div className=\"form-options-wrapper\">\n        <FormDateRangeContainer />\n        <FormGuestCountContainer />\n        <FormPriceRangeContainer />\n      </div>\n\n      <div className=\"switch-wrapper\">\n        <p className=\"show-map-p\">Show Map</p>\n        <Switch onChange={() => receiveMapIsActive(!mapIsActive)} checked={mapIsActive}/>\n      </div>\n    \n    </div> \n      \n  )\n};\n\nexport default FormOptions;","const google = window.google;\n\n\nexport default class MarkerManager {\n  constructor(map) {\n    this.map = map;\n    this.markers = {};\n    this.removeMarker = this.removeMarker.bind(this);\n  }\n\n  updateMarkers(spots) {\n    const spotsObj = {};\n    spots.forEach(spot => spotsObj[spot._id] = spot);\n\n    Object.keys(this.markers)\n      .filter(spotId => !spotsObj[spotId])\n      .forEach((spotId) => this.removeMarker(this.markers[spotId]));\n    \n    spots\n      .filter(spot => !this.markers[spot._id])\n      .forEach(newSpot => this.createMarkerFromSpot(newSpot));\n  }\n\n  removeMarker(marker) {\n    this.markers[marker.spotId].setMap(null);\n    delete this.markers[marker.spotId];\n  }\n\n  createMarkerFromSpot(spot) {\n    const position = { lat: spot.lat, lng: spot.lng };\n    var contentString =\n      '<div id=\"content\">' +\n      '<div id=\"siteNotice\">' +\n      \"</div >\" +\n      `<img style=\"max-height: 120px; max-width: 200px;\" alt=\"\" src=${\n        spot.images[0].img_url\n      }>` +\n      `<h1 id=\"firstHeading\" class=\"firstHeading\" style=\"max-width: 200px; word-break: break-word;\"><b>${\n        spot.name\n      }</b></h1>` +\n      '<div id=\"bodyContent\">' +\n      `<p><b>$${spot.price} per night</b></p>` +\n      \"</div>\" +\n      \"</div>\";\n\n    var infowindow = new google.maps.InfoWindow({\n      content: contentString\n    });\n\n    const marker = new google.maps.Marker({\n      position,\n      map: this.map,\n      label: {\n        text: `$${spot.price}`,\n        fontSize: \"9px\",\n        fontWeight: \"bold\"\n      },\n      spotId: spot._id\n    });\n    marker.addListener(\"click\", function() {\n      infowindow.open(this.map, marker);\n    });\n    this.markers[marker.spotId] = marker;\n  }\n\n}","import React from 'react';\nimport FormOptions from './form_options';\nimport { withRouter } from 'react-router-dom';\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from 'react-places-autocomplete';\nimport './auto_complete.css';\nimport _ from 'lodash';\nimport MarkerManager from './../../util/marker_manager';\n\nconst google = window.google;\n\nclass AutoComplete extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { address: ''};\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!_.isEqual(prevProps.activeSearch, this.props.activeSearch)) {\n      if (!window.preventFetch) {\n        const inputEl = document.getElementById(\"header-search-input\");\n        let options = {\n          bounds: this.props.activeSearch.bounds,\n          searchText: inputEl.value,\n          startDate: this.props.activeSearch.startDate,\n          endDate: this.props.activeSearch.endDate,\n          guestCount: this.props.activeSearch.guestCount,\n          priceRange: this.props.activeSearch.priceRange\n        };\n        this.props.fetchSpots(options);\n        if (\n          this.props.history.location.pathname !== \"/spots\" &&\n          this.props.activeSearch.active === true\n        ) {\n          this.props.history.push(`/spots`);\n        }\n      } else {\n        window.preventFetch = false;\n        const inputEl = document.getElementById(\n          \"header-search-input\"\n        );\n        let options = {\n          bounds: this.props.activeSearch.bounds,\n          searchText: inputEl.value,\n          startDate: this.props.activeSearch.startDate,\n          endDate: this.props.activeSearch.endDate,\n          guestCount: this.props.activeSearch\n            .guestCount,\n          priceRange: this.props.activeSearch.priceRange\n        };\n        this.props.fetchSpots(options).then(() => {\n          this.MarkerManager = window.markerManager;\n          this.MarkerManager.updateMarkers(this.props.spots);\n        });\n        if (this.props.history.location.pathname !== \"/spots\") \n          this.props.history.push(`/spots`);\n      }\n    } else {\n        if (window.markerManager) {\n          this.MarkerManager = window.markerManager;\n          this.MarkerManager.updateMarkers(this.props.spots);\n        }\n\n    }\n  }\n\n  handleChange = address => {\n    this.setState({ address });\n  }\n\n  handleSelect = address => {\n    this.setState({ address });\n    if (window.map) {\n      window.preventFetch = true;\n      geocodeByAddress(address).then(results => {\n        getLatLng(results[0]).then(({lat, lng}) => {\n          window.locationObj = new google.maps.LatLng(lat, lng);\n          window.map.panTo(window.locationObj);\n        });\n        this.activateSearch();\n      });\n    } else {\n      window.preventFetch = false;\n      geocodeByAddress(address)\n        .then(results => getLatLng(results[0]))\n        .then(latLng => {\n          const location = latLng;\n          this.props.receiveLocation(new google.maps.LatLng(location.lat, location.lng));\n          // this.props.receiveLocation(location);\n          this.activateSearch();\n        })\n        .catch(error => console.error('Error', error));\n    }\n    \n\n  };\n\n  activateSearch() {\n    this.props.receiveSearchStatus(true);\n    this.props.receiveMapIsActive(true);\n  }\n\n  render() {\n\n    let options;\n    if (this.props.activeSearch.active) {\n      options = <div><FormOptions receiveMapIsActive={this.props.receiveMapIsActive} mapIsActive={this.props.activeSearch.mapIsActive}/></div>;\n    }\n\n    return (\n      <div>\n      <PlacesAutocomplete\n        value={this.state.address}\n        onChange={this.handleChange}\n        onSelect={this.handleSelect}\n      >\n        {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\n          <div>\n              <form onSubmit={(e) => {e.preventDefault();}}>\n                <input id=\"header-search-input\"\n                  {...getInputProps({\n                    placeholder: 'Search Spots ... (try San Francisco)',\n                    placeholder: 'Search Spots ... (try San Francisco)',\n                    placeholder: 'Search Spots ... (try San Francisco)',\n                    placeholder: 'Search Spots ... (try San Francisco)',\n                    className: 'location-search-input',\n                  })}\n                />\n            </form>\n            <div className=\"autocomplete-dropdown-container\">\n              {loading && <div>Loading...</div>}\n              {suggestions.map(suggestion => {\n                const className = suggestion.active\n                  ? 'suggestion-item--active'\n                  : 'suggestion-item';\n                // inline style for demonstration purpose\n                const style = suggestion.active\n                  ? { backgroundColor: '#fafafa', cursor: 'pointer' }\n                  : { backgroundColor: '#ffffff', cursor: 'pointer' };\n                return (\n                  <div\n                    {...getSuggestionItemProps(suggestion, {\n                      className,\n                      style,\n                    })}\n                  >\n                    <span>{suggestion.description}</span>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </PlacesAutocomplete>\n      {options}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(AutoComplete);","import { connect } from 'react-redux';\nimport AutoComplete from './auto_complete';\nimport { fetchSpots } from './../../actions/spots_actions';\nimport {\n  receiveSearchStatus,\n  receiveLocation,\n  receiveBounds,\n  receiveMapIsActive\n} from \"./../../actions/search_actions\";\n\nconst mapStateToProps = state => {\n  return {\n  activeSearch: state.ui.activeSearch,\n  spots: Object.values(state.entities.spots),\n}};\n\nconst mapDispatchToProps = dispatch => ({\n  fetchSpots: options => dispatch(fetchSpots(options)),\n  receiveSearchStatus: active => dispatch(receiveSearchStatus(active)),\n  receiveLocation: location => dispatch(receiveLocation(location)),\n  receiveBounds: bounds => dispatch(receiveBounds(bounds)),\n  receiveMapIsActive: (mapIsActive) => dispatch(receiveMapIsActive(mapIsActive))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AutoComplete);","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nclass LoggedInNavMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.logoutUser = this.logoutUser.bind(this);\n    this.linkToProfile = this.linkToProfile.bind(this);\n  }\n\n  logoutUser(e) {\n    e.preventDefault();\n    this.props.logout();\n  }\n\n  linkToProfile() {\n    this.props.history.push('/profile');\n  }\n\n  render() {\n    return (\n      <div className=\"nav-menu-buttons\">\n        <button className=\"nav-menu-button\" onClick={this.linkToProfile}>Profile</button>\n        <button className=\"nav-menu-button\" onClick={this.logoutUser}>Logout</button>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(LoggedInNavMenu);","\nimport { connect } from 'react-redux';\nimport LoggedInNavMenu from './logged_in_nav_menu';\nimport { logout } from '../../actions/session_actions';\n\nconst mapStateToProps = state => ({\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logout: () => dispatch(logout())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoggedInNavMenu);","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nclass SignupForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      handle: '',\n      password: '',\n      password2: '',\n      errors: {}\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.renderFieldErrors = this.renderFieldErrors.bind(this);\n    this.clearedErrors = false;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.signedIn === true) {\n      this.props.history.push('/login');\n    }\n\n    this.setState({ errors: nextProps.errors });\n  }\n\n  update(field) {\n    return e => this.setState({\n      [field]: e.currentTarget.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let user = {\n      email: this.state.email,\n      handle: this.state.handle,\n      password: this.state.password,\n      password2: this.state.password2\n    };\n\n    this.props.signup(user, this.props.history);\n  }\n\n  renderErrors() {\n    return (\n      <ul>\n        {Object.keys(this.state.errors).map((error, i) => (\n          <li key={`error-${i}`}>\n            {this.state.errors[error]}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n\n  renderFieldErrors(field) {\n    if (this.state.errors[field]) {\n      return (\n        <div className=\"error-div\">\n          <h5 className=\"field-error\">{this.state.errors[field]}</h5>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"error-div\" />\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"login-form-container\">\n        \n\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"login-form\">\n            <br />\n            <h1 className=\"session-modal-header\">Sign up to continue</h1>\n            <br/>\n            <input type=\"text\"\n              className=\"modal-input-field\"\n              value={this.state.email}\n              onChange={this.update('email')}\n              placeholder=\"Email\"\n            />\n            {this.renderFieldErrors(\"email\")}\n            <input type=\"text\"\n              className=\"modal-input-field\"\n              value={this.state.handle}\n              onChange={this.update('handle')}\n              placeholder=\"Handle\"\n            />\n            {this.renderFieldErrors(\"handle\")}\n            <input type=\"password\"\n              className=\"modal-input-field\"\n              value={this.state.password}\n              onChange={this.update('password')}\n              placeholder=\"Password\"\n            />\n            {this.renderFieldErrors(\"password\")}\n            <input type=\"password\"\n              className=\"modal-input-field\"\n              value={this.state.password2}\n              onChange={this.update('password2')}\n              placeholder=\"Confirm Password\"\n            />\n            {this.renderFieldErrors(\"password2\")}\n            <input className=\"session-modal-submit-button\" type=\"submit\" value=\"Submit\" />\n            <div className=\"login-modal-lower-text\">\n              <h4>Already have an account?</h4><h4 onClick={() => this.props.handleClick(\"login-modal\")} className=\"switch-between-modals\">Log in</h4>\n            </div>\n          </div>\n        </form>\n\n        \n      </div>\n    );\n  }\n}\n\nexport default withRouter(SignupForm);","import { connect } from 'react-redux';\nimport { signup, login } from '../../actions/session_actions';\nimport SignupForm from './signup_form';\n\nconst mapStateToProps = (state) => {\n  return {\n    signedIn: state.session.isSignedIn,\n    errors: state.errors.session\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signup: user => dispatch(signup(user)),\n    login: user => dispatch(login(user))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SignupForm);","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      password: '',\n      errors: {}\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    // this.renderErrors = this.renderErrors.bind(this);\n    this.renderFieldErrors = this.renderFieldErrors.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentUser === true) {\n      // this.props.history.push('/');\n      //push to homepage after login\n    }\n\n    this.setState({ errors: nextProps.errors });\n  }\n\n  update(field) {\n    return e => this.setState({\n      [field]: e.currentTarget.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    let user = {\n      email: this.state.email,\n      password: this.state.password\n    };\n\n    this.props.login(user);\n  }\n\n  // renderErrors() {\n  //   return (\n  //     <ul>\n  //       {Object.keys(this.state.errors).map((error, i) => (\n  //         <li key={`error-${i}`}>\n  //           {this.state.errors[error]}\n  //         </li>\n  //       ))}\n  //     </ul>\n  //   );\n  // }\n\n  renderFieldErrors(field) {\n    if(this.state.errors[field]) {\n      return (\n        <div className=\"error-div\">\n          <h5 className=\"field-error\">{this.state.errors[field]}</h5>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"error-div\"/>\n      )\n    }\n  }\n  \n\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"login-form\">\n            <br />\n            <h1 className=\"session-modal-header\">Log in to continue</h1>\n            <br/>\n            <input type=\"text\"\n              className=\"modal-input-field\"\n              value={this.state.email}\n              onChange={this.update('email')}\n              placeholder=\"Email\"\n            />\n            {this.renderFieldErrors(\"email\")}\n       \n            <input type=\"password\"\n              className=\"modal-input-field\"\n              value={this.state.password}\n              onChange={this.update('password')}\n              placeholder=\"Password\"\n            />\n            {this.renderFieldErrors(\"password\")}\n  \n            <input className=\"session-modal-submit-button\" type=\"submit\" value=\"Submit\" />\n            <div className=\"login-modal-lower-text\">\n              <h4>Don't have an account?</h4><h4 onClick={() => this.props.handleClick(\"signup-modal\")} className=\"switch-between-modals\">Sign up</h4>\n            </div>\n          </div>\n        </form>\n        <div onClick={() => this.props.handleClick(\"login-modal\")} className=\"modal-underlay\"></div>\n      </div>\n      \n    );\n  }\n}\n\nexport default withRouter(LoginForm);","import { connect } from 'react-redux';\nimport { login } from '../../actions/session_actions';\nimport LoginForm from './login_form';\n\nconst mapStateToProps = (state) => {\n  return {\n    errors: state.errors.session\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    login: user => dispatch(login(user))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoginForm);","import React from 'react';\nimport SignupFormContainer from './../session/signup_form_container';\nimport LoginFormContainer from './../session/login_form_container';\nimport './nav_modals.css';\n\nclass LoggedOutNavMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.activeModal = null;\n    this.handleClick = this.handleClick.bind(this);\n  }\n  \n  handleClick(id) {\n    if (this.activeModal === id) {\n      this.closeModal(id);\n      this.activeModal = null;\n      this.toggleOverlay();\n    } else if (this.activeModal === null) {\n      this.activeModal = id;\n      this.openModal(id);\n      this.toggleOverlay();\n    } else {\n      this.closeModal(this.activeModal);\n      this.activeModal = id;\n      this.openModal(id);\n    }\n  };\n\n  closeModal(id) {\n    let modal = document.getElementById(id);\n    modal.classList.remove('show-session-modal');\n  }\n\n  openModal(id) {\n    let modal = document.getElementById(id);\n    modal.classList.add('show-session-modal');\n  }\n\n  toggleOverlay() {\n    let modalUnderlay = document.getElementById(\"modal-underlay\");\n    modalUnderlay.classList.toggle('show-modal-underlay');\n  }\n\n  render() {\n    return (\n      <div className=\"logged-out-nav-menu\">\n        <div className=\"nav-menu-buttons\">\n          <button className=\"nav-menu-button\" onClick={() => this.handleClick(\"signup-modal\")}>Signup</button>\n          <button className=\"nav-menu-button\" onClick={() => this.handleClick(\"login-modal\")}>Login</button>\n        </div>\n        <div className=\"session-modals\">\n          \n            <div id=\"signup-modal\" className=\"signup-modal\">\n              <button className=\"close-modal-button\" onClick={() => this.handleClick(\"signup-modal\")}> &#215;</button>\n              <SignupFormContainer handleClick={this.handleClick}/>\n            </div>\n  \n            <div id=\"login-modal\" className=\"login-modal\">\n              <button className=\"close-modal-button\" onClick={() => this.handleClick(\"login-modal\")}> &#215;</button>\n              <LoginFormContainer handleClick={this.handleClick}/>\n            </div>\n            <div onClick={() => this.handleClick(this.activeModal)} id=\"modal-underlay\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoggedOutNavMenu;","import LoggedOutNavMenu from './logged_out_nav_menu';\nimport { connect } from 'react-redux';\n\n\nconst mapStateToProps = state => ({\n\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoggedOutNavMenu);","import React from 'react';\nimport './navbar.css';\nimport AutoCompleteContainer from './../search/auto_complete_container';\nimport LoggedInNavMenuContainer from './logged_in_nav_menu_container';\nimport LoggedOutNavMenuContainer from './logged_out_nav_menu_container';\nimport { withRouter } from 'react-router-dom';\n\n\nclass NavBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.getMenuOptions = this.getMenuOptions.bind(this);\n    this.linkToMainPage = this.linkToMainPage.bind(this);\n  }\n\n  getMenuOptions() {\n    if (this.props.loggedIn) {\n      return (\n        <div className=\"nav-menu\">\n          <LoggedInNavMenuContainer />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"nav-menu\">\n          <LoggedOutNavMenuContainer />\n        </div>\n      );\n    }\n  }\n\n  linkToMainPage() {\n    this.props.history.push('/');\n    this.props.receiveMapIsActive(false);\n    this.props.receiveSearchStatus(false);\n  }\n\n  render() {\n    return (\n      <div className=\"nav-bar\">\n        <div className=\"nav-bar-left\">\n          <h1 onClick={this.linkToMainPage}>A</h1>\n          <AutoCompleteContainer />\n        </div>\n        {this.getMenuOptions()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(NavBar);","import { connect } from 'react-redux';\nimport { logout } from '../../actions/session_actions';\nimport { receiveSearchStatus, receiveMapIsActive } from '../../actions/search_actions';\n\nimport NavBar from './navbar';\n\nconst mapStateToProps = state => ({\n  loggedIn: state.session.isAuthenticated\n});\n\nconst mapDispatchToProps = dispatch => ({\n  logout: () => dispatch(logout()),\n  receiveMapIsActive: (mapIsActive) => dispatch(receiveMapIsActive(mapIsActive)),\n  receiveSearchStatus: (active) => dispatch(receiveSearchStatus(active))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);","import React from 'react';\nimport './splash_page.css'\n\nclass MainPage extends React.Component {\n\n  render() {\n    // debugger;\n    return (\n      <div className=\"splash-page\">\n        <h1 className=\"splash-page-title\" >Your home away from home...</h1>\n        <img alt=\"\" className=\"splash-page\" src='http://www.vythiriresort.com/images/gallery/high-resolution/tree_house.jpg' />\n      </div>\n    );\n  }\n}\n\nexport default MainPage;","import React from 'react';\nimport { Link } from \"react-router-dom\";\n\nexport const SpotIndexItem = ({spot, mapIsActive}) => {\n  if ( mapIsActive ) {\n    return (<Link key={spot._id} to={`/spot/${spot._id}`}>\n    <li key={spot._id} className=\"spot-list-item-m\">\n\n      <div className=\"m-spot-container\">\n        <div id=\"spot-list-photo-container-m\">\n          <img alt=\"\" className=\"spot-list-photo-m\" src={spot.images[0].img_url} />\n        </div>\n\n        <div className=\"spot-list-deets\">\n          <div className=\"spot-list-deets-desc\">\n            <p className=\"spot-list-description-m\">{spot.name}</p>\n          </div>\n          \n          <div className=\"spot-list-deets-price\">\n            <p className=\"spot-list-price-m\">${spot.price}/night</p>\n          </div>\n        </div>\n      </div>\n      \n    </li>\n  </Link>)\n\n  } else {\n    return (\n      <Link key={spot._id} to={`/spot/${spot._id}`}>\n        <div>\n          <li key={spot._id} className=\"spot-list-item\">\n            <div id=\"spot-list-photo-container\">\n              <img alt=\"\" id=\"spot-list-photo\" src={spot.images[0].img_url} />\n            </div>\n            <p id=\"spot-list-description\">{spot.name}</p>\n            <p id=\"spot-list-price\">${spot.price}/night</p>\n          </li>\n        </div>\n      </Link>\n    )\n  }\n}\n","import './spot_map.css';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport MarkerManager from './../../util/marker_manager';\nimport _ from 'lodash';\n\nconst google = window.google;\n\nclass SpotMap extends React.Component {\n  // constructor(props) {\n  //   super(props);\n  // }\n\n  componentDidMount() {\n    let mapOptions = {\n      center: this.props.searchParams.location,\n      zoom: 14\n    };\n\n    let map = this.refs.map;\n    window.map = this.map = new google.maps.Map(map, mapOptions);\n    window.markerManager = this.MarkerManager = new MarkerManager(this.map);\n    this.MarkerManager.updateMarkers(this.props.spots);\n    this.map.addListener('bounds_changed', () => {\n      let mapBounds = this.map.getBounds();\n      let southWest = mapBounds.getSouthWest();\n      let northEast = mapBounds.getNorthEast();\n      let bounds = { sw: { lat: southWest.lat(), lng: southWest.lng() }, \n      ne: { lat: northEast.lat(), lng: northEast.lng() }};\n      this.props.receiveBounds(bounds);\n\n      let location = this.map.getCenter();\n      this.props.receiveLocation(location);\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (!_.isEqual(prevProps.searchParams.location, this.props.searchParams.location)) {\n      this.MarkerManager.updateMarkers(this.props.spots);\n    } \n  }\n\n  render() {\n    return (\n    <div id=\"map-container\" ref=\"map\"> </div>\n    );\n  }\n  \n}\n\n\nexport default withRouter(SpotMap);","import { connect } from 'react-redux';\nimport SpotMap from './spot_map';\nimport { fetchSpots } from './../../actions/spots_actions';\nimport { receiveLocation, receiveBounds } from './../../actions/search_actions';\n\nconst mapStateToProps = state => ({\n  spots: Object.values(state.entities.spots),\n  searchParams: state.ui.activeSearch\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchSpots: (data) => dispatch(fetchSpots(data)),\n  receiveLocation: (location) => dispatch(receiveLocation(location)),\n  receiveBounds: (bounds) => dispatch(receiveBounds(bounds)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SpotMap);","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { SpotIndexItem } from './spot_index_item';\nimport MapContainer from './../map/spot_map_container';\n\nclass Spots extends React.Component {\n  // constructor(props) {\n  //   super(props);\n  // }\n\n  componentDidMount() {\n    this.props.fetchSpots();\n    this.props.receiveSearchStatus(true);\n  }\n\n  isMapActive() {\n    let outerSpotsDiv = document.getElementById(\"outer-spots-div\");\n    let list = document.getElementById(\"spots-results-list\");\n\n    if (this.props.mapIsActive) {\n      if (outerSpotsDiv && !outerSpotsDiv.classList.contains(\"spots-index-map-active\")) {\n        outerSpotsDiv.classList.add(\"spots-index-map-active\");\n        list.classList.add(\"spots-results-list-column\");\n        list.classList.remove(\"spots-results-list\");\n      }\n      return <MapContainer/>\n    } else {\n      if (outerSpotsDiv && outerSpotsDiv.classList.contains(\"spots-index-map-active\")) {\n        outerSpotsDiv.classList.remove(\"spots-index-map-active\");\n        list.classList.add(\"spots-results-list\");\n        list.classList.remove(\"spots-results-list-column\");\n        \n      }\n    }\n  }\n\n  render() {\n\n    return (\n      <div className=\"spots-and-map-div\">\n        <div id=\"outer-spots-div\" className=\"outer-spots-div\">\n          <h2 id=\"spots-list-header\">\n            Explore all {this.props.spots.length} homes\n          </h2>\n          <div id=\"spots-list-container\">\n            <ul id=\"spots-results-list\" className=\"spots-results-list\">\n              {this.props.spots.map(spot => (\n                <SpotIndexItem spot={spot} key={spot._id} mapIsActive={this.props.mapIsActive} />\n              ))}\n            </ul>\n          </div>\n        </div>\n\n     \n          {this.isMapActive()}\n\n\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Spots);\n","import { connect } from 'react-redux';\nimport { fetchSpots, fetchSpot } from '../../actions/spots_actions';\nimport {\n  receiveSearchStatus,\n  receiveMapIsActive\n} from \"../../actions/search_actions\";\n\nimport Spots from './spots';\n\nconst mapStateToProps = state => ({\n    spots: Object.values(state.entities.spots),\n    active: state.ui.activeSearch.active,\n    mapIsActive: state.ui.activeSearch.mapIsActive\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchSpots: data => dispatch(fetchSpots(data)),\n  fetchSpot: id => dispatch(fetchSpot(id)),\n  receiveSearchStatus: active => dispatch(receiveSearchStatus(active))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Spots);","import * as APIUtil from '../util/bookings_api_util';\nexport const RECEIVE_BOOKINGS = \"RECEIVE_BOOKINGS\";\nexport const RECEIVE_BOOKING_ERRORS = \"RECEIVE_BOOKING_ERRORS\";\n\nexport const receiveBookings = bookings => ({\n  type: RECEIVE_BOOKINGS,\n  bookings\n});\n\nexport const receiveBookingErrors = err => ({\n  type: RECEIVE_BOOKING_ERRORS,\n  err\n});\n  \n\nexport const fetchUserBookings = user_id => dispatch => {\n  return APIUtil.fetchUserBookings(user_id)\n    .then(bookings => dispatch(receiveBookings(bookings)))\n    .catch(err => console.log(err));\n};\n\nexport const fetchSpotBookings = spot_id => dispatch => {\n  return APIUtil.fetchSpotBookings(spot_id)\n    .then(bookings => dispatch(receiveBookings(bookings)))\n    .catch(err => console.log(err));\n};\n\nexport const createBooking = data => dispatch => {\n  return APIUtil.createBooking(data)\n    .then(bookings => dispatch(receiveBookings(bookings)))\n    .catch(err => dispatch(receiveBookingErrors(err)));\n};\n\nexport const deleteBooking = id => dispatch => {\n  return APIUtil.deleteBooking(id)\n    .then(bookings => dispatch(receiveBookings(bookings)))\n    .catch(err => console.log(err));\n};","import axios from \"axios\";\n\nexport const fetchUserBookings = user_id => {\n  return axios.post('/api/bookings/', { user_id });\n};\n\nexport const fetchSpotBookings = spot_id => {\n  return axios.get(`/api/bookings/${spot_id}`);\n};\n\nexport const createBooking = data => {\n  return axios.post(`/api/bookings/create`, data);\n};\n\nexport const deleteBooking = id => {\n  return axios.delete(`/api/bookings/${id}`);\n};","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { DateRangePicker } from 'react-dates';\nvar moment = require(\"moment\");\n\nclass ReservationForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      startDate: null,\n      endDate: null,\n      guest_count: \"\",\n      spot_id: this.props.spot._id,\n      user_id: \"\",\n      response_messages: null\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.isDayBlocked = this.isDayBlocked.bind(this);\n  }\n  // componentDidUpdate() {\n   \n  // }\n  componentDidMount() {\n    \n    this.props.fetchSpotBookings(this.props.spot._id);\n  }\n\n  update(field) {\n    \n    return e => this.setState({ [field]: e.currentTarget.value });\n  } \n\n  renderResponseMessages(messages) {\n    if (messages.type === \"success\") {\n      this.setState({\n        response_messages: [\n          <div key=\"success\" id=\"messages-success\">\n            Successfully Booked!\n          </div>\n        ]\n      });\n    } else {\n      this.setState({\n        response_messages: [\n          <div key=\"errors\" id=\"messages-errors\">\n            {messages.body}\n          </div>\n        ]\n      });\n    }\n    \n\n  }\n  isDayBlocked(day) {\n     \n      let calendarDay = day.calendar();\n      let bookings = this.props.user.bookings;\n      bookings = Object.values(bookings);\n      let result = false;\n\n      bookings.forEach( booking => {\n      \n        let startDay = moment(booking.start_date).calendar();\n        let endDay = moment(booking.end_date).calendar();\n       //console.log(`inside forEach loop: ${calendarDay}`);\n\n        if (calendarDay >= startDay && calendarDay <= endDay) {\n          //console.log(`returning true: ${calendarDay}`);\n          \n          result = true;\n       } \n      });\n      \n      return result;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let temp = null;\n    let bookingInfo = this.state;\n    \n      bookingInfo.user_id = this.props.user.user_id;\n      \n\n      this.props.createBooking(bookingInfo).then(result => {\n        temp = result;\n        if(temp.type === \"RECEIVE_BOOKINGS\") {\n          \n          if(temp.bookings.status === 200) {\n            this.renderResponseMessages({\n              type: \"success\",\n            })\n          }\n          \n        } else if(temp.type === \"RECEIVE_BOOKING_ERRORS\") {\n          \n          this.renderResponseMessages({\n            type: temp.type,\n            body: Object.values(temp.err.response.data)\n          });\n        }\n        \n      });\n      \n  }\n\n  render() {\n    if (!this.props.spot) return (<div></div>)\n\n    return (\n      <div>\n        <div className=\"reserve-main\">\n          <div id=\"reserve-inner-container\">\n            <div id=\"reserve-price\">\n              ${this.props.spot.price}\n              <span className=\"sans12\"> per night</span>\n            </div>\n            <span className=\"divider\" />\n            <form id=\"reserve-form\" onSubmit={this.handleSubmit}>\n              <label>\n                Dates\n                <DateRangePicker\n                  startDate={this.state.startDate} // momentPropTypes.momentObj or null,\n                  isDayBlocked={day => this.isDayBlocked(day)}\n                  startDateId=\"start-date-field\" // PropTypes.string.isRequired,\n                  endDate={this.state.endDate} // momentPropTypes.momentObj or null,\n                  endDateId=\"end-date-field\" // PropTypes.string.isRequired,\n                  onDatesChange={({ startDate, endDate }) =>\n                    this.setState({ startDate, endDate })\n                  } // PropTypes.func.isRequired,\n                  focusedInput={this.state.focusedInput} // PropTypes.oneOf([START_DATE, END_DATE]) or null,\n                  onFocusChange={focusedInput =>\n                    this.setState({ focusedInput })\n                  } // PropTypes.func.isRequired,\n                />\n              </label>\n              <label>\n                Guests\n                <br />\n                <input\n                  className=\"reserve-guests\"\n                  onChange={this.update(\"guest_count\")}\n                  type=\"text\"\n                  placeholder=\"enter # of guests\"\n                />\n              </label>\n              <input\n                id=\"reservation-submit-button\"\n                type=\"submit\"\n                value=\"Book\"\n              />\n            </form>\n          </div>\n          \n            {this.state.response_messages}\n          \n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ReservationForm);\n\n//     //check for booking conflicts\n//     let bookedStart = moment(new Date(bookingInfo.startDate.format()));\n//     let bookedEnd = bookingInfo.endDate.calendar();\n//     let hasBookingConflict = false;\n//     let bookings = this.props.user.bookings;\n//     bookings = Object.values(bookings);\n// debugger\n//      bookings.forEach(booking => {\n//        let startDay = moment(booking.start_date).calendar();\n//        let endDay = moment(booking.end_date).calendar();\n       \n//        //console.log(`inside forEach loop: ${calendarDay}`);\n      \n//        if (bookedStart < startDay && bookedEnd > endDay) {\n//          console.log(`booking conflict: ${startDay} ${endDay}`);\n//           debugger\n//          hasBookingConflict = true;\n//        }\n//      });","import { connect } from \"react-redux\";\nimport { createBooking } from \"../../actions/bookings_actions\";\nimport ReservationForm from \"./reservation_form\";\nimport { fetchSpotBookings } from \"../../actions/bookings_actions\";\n\nconst mapStateToProps = (state, ownProps) => {\n  let user_id;\n  if(state.session.hasOwnProperty(\"user\")) {\n    user_id = state.session.user.id;\n  } else {\n    user_id = \"\";\n  }\n   \n  const user = {\n    user_id: user_id,\n    bookings: state.entities.bookings\n  };\n\n  return {\n       user: user\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    createBooking: bookingInfo => dispatch(createBooking(bookingInfo)),\n    fetchSpotBookings: id => dispatch(fetchSpotBookings(id))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ReservationForm);\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport ReservationFormContainer from './reservation_form_container';\nvar moment = require(\"moment\");\n\nclass SpotShow extends React.Component {\n  componentDidMount() {\n    if (!this.props.spot) {\n      this.props.fetchSpot(this.props.spot_id);\n    } \n    this.props.receiveSearchStatus(false);\n  }\n\n  render() {\n    if (!this.props.spot) return (<div></div>)\n    \n    return (\n      <div>\n        <div className=\"spotshow-main\">\n          <div id=\"spotshow-photo-container\">\n            <img className=\"spotshow-photo-large\" src={this.props.spot.images[0].img_url} alt=\"\" />\n            <img className=\"spotshow-photo-large\" src={this.props.spot.images[1].img_url} alt=\"\" />\n          </div>\n          <div id=\"outer\">\n            <div className=\"spotshow-info-column\">\n              <p className=\"spotshow-name\">{this.props.spot.name}</p>\n              <p className=\"spotshow-city\">{this.props.spot.city} </p>\n              <span className=\"spotshow-occupancy\">Occupancy<br />\n                <p className=\"s\">{this.props.spot.occupancy} guests</p>\n              </span>\n              <div className=\"spotshow-description\">\n                <p>\n                  {this.props.spot.description}\n                </p>\n              </div>\n\n            </div>\n            <div className=\"check-in-box\">\n              <ReservationFormContainer spot={this.props.spot} />\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(SpotShow);","import { connect } from \"react-redux\";\nimport { fetchSpots, fetchSpot } from \"../../actions/spots_actions\";\nimport { fetchSpotBookings } from \"../../actions/bookings_actions\";\nimport {\n  receiveSearchStatus,\n  receiveMapIsActive\n} from \"../../actions/search_actions\";\n\nimport SpotShow from \"./spot_show\";\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    spot: state.entities.spots[ownProps.match.params.id],\n    spot_id: ownProps.match.params.id,\n  \n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchSpots: data => dispatch(fetchSpots(data)),\n    fetchSpot: id => dispatch(fetchSpot(id)),\n    fetchSpotBookings: id => dispatch(fetchSpotBookings(id)),\n    receiveSearchStatus: active => dispatch(receiveSearchStatus(active))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SpotShow);\n","import React from 'react';\nimport './profile.css';\nimport { Link } from \"react-router-dom\";\n\nclass Profile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    let currentUserId = null;\n    if (this.props.currentUser.token) {\n      currentUserId = this.props.currentUser.token.id;\n    } else {\n      currentUserId = this.props.currentUser.id;\n    }\n    this.state = {};\n    this.props.fetchUserBookings(currentUserId)\n      .then(() => Object.values(this.props.bookings).forEach((booking) => {\n        this.props.fetchSpot(booking.spot_id).then((response) => {\n          this.setState({\n            [booking._id]: response.spots.data[booking.spot_id]\n          });\n        });\n      }));\n  }\n\n  componentDidUpdate(prevProps) {\n    if(prevProps.history.location.pathname !== this.props.history.location.pathname) {\n      let currentUserId = null;\n      if (this.props.currentUser.token) {\n        currentUserId = this.props.currentUser.token.id;\n      } else {\n        currentUserId = this.props.currentUser.id;\n      }\n      this.props.fetchUserBookings(this.props.currentUserId)\n        .then(() => Object.values(this.props.bookings).forEach((booking) => {\n  \n          this.props.fetchSpot(booking.spot_id);\n        }));\n    }\n  }\n\n  render() {\n    if (!this.props.bookings) return null;\n    if (Object.keys(this.state).length < Object.keys(this.props.bookings).length) return null;\n    const bookings = this.props.bookings;\n\n    const bookingsLis = bookings.map( booking => {\n        const startDate = new Date(booking.start_date);\n        const endDate = new Date(booking.end_date);\n        const createdAt = new Date(booking.created_at);\n        const imgUrl = this.state[booking._id].images[0].img_url;\n        return (\n          <li key={booking._id}>\n            <div>\n              <Link key={booking._id} to={`/spot/${booking.spot_id}`}>\n                <img className=\"bookings-photo\" src={imgUrl} alt=\"\" />\n              </Link>\n              <div className=\"profile-booking-text\">\n                <p>Booking Confirmation: {booking._id}</p>\n                <p>\n                  Booked on: {createdAt.getMonth() + 1}/\n                  {createdAt.getDate() + 1}/{createdAt.getFullYear()}\n                </p>\n                <p>\n                  From: {startDate.getMonth() + 1}/\n                  {startDate.getDate() + 1}/{startDate.getFullYear()}\n                </p>\n                <p>\n                  Until: {endDate.getMonth() + 1}/\n                  {endDate.getDate() + 1}/{endDate.getFullYear()}\n                </p>\n                <p>Booked for {booking.guest_count} occupant(s)</p>\n              </div>\n            </div>\n            <div className=\"profile-booking-delete-button-div\">\n              <button\n                onClick={e => {\n                  e.preventDefault();\n                  this.props.deleteBooking(booking._id);\n                }}\n              >\n                Delete booking\n              </button>\n            </div>\n          </li>\n        );\n      })\n\n    return (\n      <div className=\"profile\">\n        <h2>Your bookings:</h2>\n        <ul>{bookingsLis}</ul>\n      </div>\n    );\n  }\n}\n\nexport default Profile;","import { connect } from 'react-redux';\nimport Profile from './profile';\nimport { fetchUserBookings, deleteBooking, fetchSpotBookings } from '../../actions/bookings_actions';\nimport { fetchSpot } from '../../actions/spots_actions';\n\nconst mapStateToProps = state => ({\n  currentUser: state.session.user,\n  bookings: Object.values(state.entities.bookings),\n  spots: state.entities.spots\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchUserBookings: (user_id) => dispatch(fetchUserBookings(user_id)),\n    deleteBooking: (id) => dispatch(deleteBooking(id)),\n    fetchSpotBookings: (spot_id) => dispatch(fetchSpotBookings(spot_id)),\n    fetchSpot: (spot_id) => dispatch(fetchSpot(spot_id))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);","import React from 'react';\nimport { ProtectedRoute } from '../util/route_util';\nimport { Switch, Route } from 'react-router-dom';\nimport NavBarContainer from './nav/navbar_container';\n\nimport MainPage from './main/main_page';\nimport SpotsContainer from './spots/spots_container';\nimport SpotContainer from './spots/spot_container';\nimport ProfileContainer from './profile/profile_container';\n\nconst App = () => (\n  <div>\n    <NavBarContainer  />\n    <div >\n    <Switch>\n      <Route exact path=\"/\" component={MainPage} />\n      <Route path=\"/spots\" component={SpotsContainer} />\n      <Route path=\"/spot/:id\" component={SpotContainer} />\n      <ProtectedRoute exact path=\"/profile\" component={ProfileContainer} />\n    </Switch>\n    </div>\n  </div>\n);\n\nexport default App;","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { HashRouter } from 'react-router-dom';\nimport App from './app';\n\n\nconst Root = ({ store }) => (\n  <Provider store={store}>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </Provider>\n);\n\nexport default Root;","import {\n  RECEIVE_CURRENT_USER,\n  RECEIVE_USER_LOGOUT,\n  RECEIVE_USER_SIGN_IN\n} from '../actions/session_actions';\n\nconst initialState = {\n  isAuthenticated: false,\n  user: {id: \"\"}\n};\n\nexport default function (state = initialState, action) {\n \n  switch (action.type) {\n    case RECEIVE_CURRENT_USER:\n      return {\n        ...state,\n        isAuthenticated: !!action.currentUser,\n        session_id: action.currentUser.token.id,\n        user: action.currentUser\n      };\n    case RECEIVE_USER_LOGOUT:\n      return {\n        isAuthenticated: false,\n        user: undefined\n      };\n    case RECEIVE_USER_SIGN_IN:\n  \n      return {\n        ...state,\n        isSignedIn: true,\n        isAuthenticated: !!action.currentUser,\n        session_id: action.currentUser.token.id,\n        user: action.currentUser\n      }\n    default:\n      return state;\n  }\n}","import {\n  RECEIVE_SESSION_ERRORS,\n  RECEIVE_CURRENT_USER,\n} from '../actions/session_actions';\n\nconst _nullErrors = [];\n\nconst SessionErrorsReducer = (state = _nullErrors, action) => {\n  Object.freeze(state);\n  switch (action.type) {\n    case RECEIVE_SESSION_ERRORS:\n      return action.errors;\n    case RECEIVE_CURRENT_USER:\n      return _nullErrors;\n    default:\n      return state;\n  }\n};\n\nexport default SessionErrorsReducer;","import {\n  RECEIVE_BOOKING_ERRORS\n} from \"../actions/bookings_actions\";\n\nconst _nullErrors = [];\n\nconst BookingsErrorsReducer = (state = _nullErrors, action) => {\n  \n  Object.freeze(state);\n  switch (action.type) {\n    case RECEIVE_BOOKING_ERRORS:\n    \n      return action.err.response.data;\n    default:\n      return state;\n  }\n};\n\nexport default BookingsErrorsReducer;\n","import { combineReducers } from 'redux';\n\nimport SessionErrorsReducer from './session_errors_reducer';\nimport BookingsErrorsReducer from \"./bookings_errors_reducer\";\n\nexport default combineReducers({\n  session: SessionErrorsReducer,\n  bookings: BookingsErrorsReducer\n});","import { RECEIVE_SPOTS } from '../actions/spots_actions';\n\nconst SpotsReducer = (state = {}, action) => {\n  Object.freeze(state);\n  switch (action.type) {\n    case RECEIVE_SPOTS:\n      return action.spots.data;\n    default:\n      return state;\n  }\n};\n\nexport default SpotsReducer;","import { RECEIVE_BOOKINGS } from '../actions/bookings_actions';\n\n\nconst BookingsReducer = (state = {}, action) => {\n  Object.freeze(state);\n  switch (action.type) {\n    case RECEIVE_BOOKINGS:\n      return action.bookings.data;\n    default:\n      return state;\n  }\n};\n\nexport default BookingsReducer;","import {\n  RECEIVE_CURRENT_USER,\n  RECEIVE_USER_SIGN_IN\n} from '../actions/session_actions';\n\nconst initialState = {\n  \n};\n\nexport default function (state = initialState, action) {\n\n  switch (action.type) {\n    case RECEIVE_CURRENT_USER:\n      let user = {\n        username: action.currentUser.username,\n        user_id: action.currentUser.token.id };\n\n      return Object.assign({}, state, { [action.currentUser.token.id]: user });\n    case RECEIVE_USER_SIGN_IN:\n      let userCurrent = {\n        username: action.currentUser.username,\n        user_id: action.currentUser.token.id\n      };\n\n      return Object.assign({}, state, { [action.currentUser.token.id]: userCurrent });\n    default:\n      return state;\n  }\n}","import { combineReducers } from 'redux';\nimport spots from './spots_reducer';\nimport bookings from './bookings_reducer';\nimport users from './users_reducer';\n\nconst EntitiesReducer = combineReducers({\n  spots,\n  bookings,\n  users\n});\n\nexport default EntitiesReducer;","import { RECEIVE_MAP_IS_ACTIVE, RECEIVE_DATE_RANGE, RECEIVE_PRICE_RANGE, RECEIVE_GUEST_COUNT, RECEIVE_SEARCH_STATUS, RECEIVE_BOUNDS, RECEIVE_LOCATION } from './../actions/search_actions';\nimport { merge } from 'lodash';\nconst google = window.google;\n\nconst defaultState = {\n  active: false,\n  startDate: null,\n  endDate: null,\n  guestCount: {\n    adults: 1,\n    children: 0,\n    infants: 0\n  },\n  priceRange: {\n    minValue: 0,\n    maxValue: 1000\n  },\n  location: new google.maps.LatLng(37.79736054067749, -122.41654052893894),\n  bounds: null,\n  mapIsActive: false\n};\n\n//this slice of state is not persisting!\n\nconst ActiveSearchReducer = (state = defaultState, action) => {\n  Object.freeze(state);\n  switch (action.type) {\n    case RECEIVE_DATE_RANGE:\n      return merge({}, state, action.dateRange);\n    case RECEIVE_PRICE_RANGE:\n      // return merge({}, state, action.priceRange); //to remove: Valery\n      return merge({}, state, { priceRange: action.priceRange });\n    case RECEIVE_GUEST_COUNT:\n      return merge({}, state, { guestCount: action.count });\n    case RECEIVE_SEARCH_STATUS:\n      return merge({}, state, { active: action.active });\n    case RECEIVE_BOUNDS:\n      return merge({}, state, { bounds: action.bounds });\n    case RECEIVE_LOCATION:\n      return merge({}, state, { location: action.location });\n    case RECEIVE_MAP_IS_ACTIVE:\n      return merge({}, state, { mapIsActive: action.mapIsActive});\n    default:\n      return state;\n  }\n};\n\nexport default ActiveSearchReducer;\n\n","import { combineReducers } from 'redux';\nimport activeSearch from './active_search_reducer';\n\nconst UIReducer = combineReducers({\n  activeSearch: activeSearch,\n});\n\nexport default UIReducer;","import { combineReducers } from 'redux';\nimport session from './session_reducer';\nimport errors from './errors_reducer';\n\nimport entities from './entities_reducer';\nimport ui from './ui_reducer';\n\nconst RootReducer = combineReducers({\n  errors,\n  session,\n  entities,\n  ui\n});\n\nexport default RootReducer;","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport logger from 'redux-logger';\n\nimport rootReducer from '../reducers/root_reducer';\n\nconst configureStore = (preloadedState = {}) => (\n  createStore(\n    rootReducer,\n    preloadedState,\n    applyMiddleware(thunk, logger)\n  )\n);\n\nexport default configureStore;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './components/root';\nimport configureStore from './store/store';\nimport jwt_decode from 'jwt-decode';\nimport { setAuthToken } from './util/session_api_util';\nimport { logout } from './actions/session_actions';\nimport axios from 'axios';\n\n\nimport 'rheostat/css/rheostat.css';\nimport 'react-dates/lib/css/_datepicker.css';\nimport './components/spots/spots.css';\nimport './components/spots/reservation_form.css';\nimport './components/session/signup_login.css';\nimport \"./components/components.css\";\n\nimport ThemedStyleSheet from 'react-with-styles/lib/ThemedStyleSheet';\nimport cssInterface from 'react-with-styles-interface-css';\nimport RheostatDefaultTheme from 'rheostat/lib/themes/DefaultTheme';\nimport ReactDatesDefaultTheme from 'react-dates/lib/theme/DefaultTheme';\nimport { fetchSpots } from './actions/spots_actions';\n\nThemedStyleSheet.registerInterface(cssInterface);\nThemedStyleSheet.registerTheme({\n  ...RheostatDefaultTheme,\n  ...ReactDatesDefaultTheme,\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let store;\n\n  if (localStorage.jwtToken) {\n    setAuthToken(localStorage.jwtToken);\n\n    const decodedUser = jwt_decode(localStorage.jwtToken);\n    const preloadedState = { session: { isAuthenticated: true, user: decodedUser, username: localStorage.currentUser },\n                               };\n                              \n    store = configureStore(preloadedState);\n\n    const currentTime = Date.now() / 1000;\n\n    if (decodedUser.exp < currentTime) {\n      store.dispatch(logout());\n      window.location.href = '/login';\n    }\n  } else {\n    store = configureStore({});\n  }\n  const root = document.getElementById('root');\n\n  ReactDOM.render(<Root store={store} />, root);\n\n  window.getState = store.getState;\n  // remove the commands below after development\n  window.axios = axios;\n  window.fetchSpots = fetchSpots;\n  window.dispatch = store.dispatch;\n});"],"sourceRoot":""}